<!-- destacar modal -->
<div class="modal fade" id="exampleModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="exampleModalLabel" aria-hidden="true" aria-modal="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel" style="letter-spacing: 0.5px;">Example modal</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

<!-- stats modal -->
<div class="modal fade" id="statsModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
  aria-labelledby="statsModalLabel" aria-hidden="true" aria-modal="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="statsModalLabel" style="letter-spacing: 0.5px;">Últimos días</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p-card>
          <div class="row">
            <div class="col">
              <div class="stats-small stats-small--1 card card-small">
                <div class="card-body p-0 d-flex">
                  <div class="d-flex flex-column m-auto">
                    <div class="stats-small__data text-center">
                      <span class="stats-small__label text-uppercase">Veces guardado</span>
                      <h6 class="stats-small__value count my-3">{{this.selectedHomeLikes}}</h6>
                    </div>
                    <!--<div class="stats-small__data">
                      <span class="stats-small__percentage stats-small__percentage--increase">4.7%</span>
                    </div>-->
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="stats-small stats-small--1 card card-small">
                <div class="card-body p-0 d-flex">
                  <div class="d-flex flex-column m-auto">
                    <div class="stats-small__data text-center">
                      <span class="stats-small__label text-uppercase">Total visitas</span>
                      <h6 class="stats-small__value count my-3">{{this.selectedHomeViews}}</h6>
                    </div>
                    <!--<div class="stats-small__data">
                      <span class="stats-small__percentage stats-small__percentage--increase">4.7%</span>
                    </div>-->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="w-100" id="custom-chart-line"></div>
          </div>
        </p-card>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Volver</button>
        <!--<button type="button" class="btn btn-primary">Save changes</button>-->
      </div>
    </div>
  </div>
</div>

<!-- / .main-navbar tables-->

<!-- End Default Dark Table -->
<!--<div class="promo-popup animated">

  <div class="pp-intro-bar"> Need More Templates?
    <span class="close">
      <i class="material-icons">close</i>
    </span>
    <span class="up">
      <i class="material-icons">keyboard_arrow_up</i>
    </span>
  </div>
  <div class="pp-inner-content">
    <h2>Dashboard Pro</h2>
    <p>A premium & modern Bootstrap admin dashboard template pack.</p>
    <a class="pp-cta extra-action">More Demos</a>
  </div>
</div>-->
<ng-progress ngProgressHttp></ng-progress>
<mat-sidenav-container class="example-container">
  <mat-sidenav #sidenav class="example-sidenav " mode="side" [class.mat-elevation-z4]="true" mode="side"
    [ngClass]="'fullscreen-nav'" [fixedInViewport]="true" [fixedTopGap]="0" [fixedBottomGap]="0">
    <div class="mt-5 mb-5">
      <nav class="navbar bg-body-tertiary bg-dark-subtle fixed-top">
        <div class="container-fluid">
          <button class="button is-link is-primary my-auto float-start" type="button" id="goBackSidenav"
            (click)="sidenav.toggle();closeSidenav()">
            <span *ngIf="showLoading" class="spinner-border text-light" role="status"
              style="width: 1.5rem; height: 1.5rem; ">
            </span>
            <span *ngIf="!showLoading" class="my-auto"><i class="bi bi-arrow-left"></i>&nbsp;Volver</span>
          </button>
        </div>
      </nav>
      <form #updateHomeForm="ngForm" (ngSubmit)="updateHome()" id="updateHomeForm">
        <div class="form-group row mt-3 align-items-center">
          <p-card header="General" *ngIf="this.tipo.includes(this.home.tipo)">
            <!--1st row-->
            <div class="row">
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="tipodevia" class="text-nowrap">Tipo de vía</label>
                <nz-select panelWidth="fit-content" #tipodevia name="tipodevia" class="viaSelect w-100"
                  nzPlaceHolder="Calle, avenida, plaza..." [nzSize]="sizeM" [(ngModel)]="this.home.tipoDeVia"
                  (nzOpenChange)="rotateArrows($event,'viaSelect')">
                  <nz-option *ngFor="let opt of tipo_de_via" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="calle">Nombre</label>
                <input #calle nz-input placeholder="Nombre de la vía p. ej. Paseo de la Castellana..."
                  [(ngModel)]="this.home.calle" name="calle" id="calle" />
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="numero">Numero</label>
                <input nz-input #numero placeholder="Número" ngModel pattern="\d*" maxlength="6"
                  (keypress)="numberOnly($event)" name="numero" [(ngModel)]="this.home.numero" />
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="piso">Piso</label>
                <nz-input-group>
                  <div nz-row>
                    <div nz-col nzSpan="10" class="float-start">
                      <input nz-input #piso placeholder="Piso" ngModel pattern="\d*" maxlength="4"
                        (keypress)="numberOnly($event)" name="piso" [(ngModel)]="this.home.piso" />
                    </div>
                    <div nz-col nzSpan="4" class="text-center">
                      <label class="mt-1">de</label>
                    </div>
                    <div nz-col nzSpan="10" class="float-end">
                      <input nz-input #plantaMasAlta ngModel pattern="\d*" maxlength="4" (keypress)="numberOnly($event)"
                        name="plantaMasAlta" [(ngModel)]="this.homeDto.plantaMasAlta" />
                    </div>
                  </div>
                </nz-input-group>
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="bajoOP">Planta baja</label>
                <div>
                  <div nz-row>
                    <div nz-col nzSpan="24" class="float-start">
                      <!--<mat-checkbox (change)="checkBox(this.home.bajoOplantabaja?true:false)" 
                          checked="{{this.home.bajoOplantabaja}}" [(ngModel)]="this.home.bajoOplantabaja">Es un bajo</mat-checkbox>-->
                      <p-checkbox [(ngModel)]="this.home.bajoOplantabaja"
                        (ngModelChange)="checkBox(this.home.bajoOplantabaja?true:false)" [binary]="true"
                        label="Es un bajo" class="my-auto" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="cp">CP</label>
                <input nz-input #cp placeholder="Código postal" ngModel pattern="\d*" maxlength="5"
                  (keypress)="numberOnly($event)" name="cp" [(ngModel)]="this.home.cp" />
              </div>
            </div>
            <!--2nd row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 mb-auto">
                <label for="distrito">Distrito</label>
                <input nz-input #distrito placeholder="Distrito" [(ngModel)]="this.home.distrito" name="distrito" />
              </div>
              <div class="col-xl-2 col-lg-2 col-md-2 col-sm-6  align-self-start">
                <label for="superficie">Superficie</label>
                <input #superficie nz-input ngModel pattern="\d*" maxlength="20" (keypress)="numberOnly($event)"
                  name="superficie" [(ngModel)]="this.home.superficie" placeholder="M²" />
              </div>
              <div class="col-xl-1 col-lg-1 col-md-2 col-sm-6 align-self-start">
                <label for="habitaciones" class=" text-nowrap">Dormitorios</label>
                <input #habitaciones nz-input ngModel pattern="\d*" maxlength="4" (keypress)="numberOnly($event)"
                  name="habitaciones" [(ngModel)]="this.home.habitaciones" placeholder="0" />
              </div>
              <div class="col-xl-1 col-lg-1 col-md-1 col-sm-6 align-self-start">
                <label for="banyos">Aseos</label>
                <input nz-input #banyos ngModel pattern="\d*" maxlength="1" (keypress)="numberOnly($event)"
                  name="banyos" [(ngModel)]="this.home.aseos" placeholder="0" />
              </div>
              <div class="col-xl-2 col-lg-2 col-md-2 col-sm-6 align-items-center d-flex flex-column align-items-center">
                <label for="aseoEnsuiteInput" class="text-nowrap">Aseo ensuite</label>
                <nz-select #aseoEnsuiteInput name="aseoEnsuiteInput" class="d-block flex-column aseoensuiteSelect w-100"
                  nzPlaceHolder="0" [nzSize]="sizeM" [(ngModel)]="this.homeDto.aseoEnsuite"
                  (nzOpenChange)="rotateArrows($event,'aseoensuiteSelect')">
                  <nz-option *ngFor="let opt of bathRooms" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-2 col-sm-6 col-xs-12 mx-auto">
                <label for="tipoEdit" class="text-nowrap">Tipo</label>
                <nz-select #tipoEdit name="tipoEdit" class="d-block flex-column typeSelect" nzPlaceHolder="Seleccione"
                  [nzSize]="sizeM" [(ngModel)]="this.home.tipo" (nzOpenChange)="rotateArrows($event,'typeSelect')">
                  <nz-option *ngFor="let opt of tipo" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
            </div>
            <!--3rd row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="stateInputEdit" class="text-nowrap">Estado</label>
                <nz-select class="d-block flex-column estadoSelect w-100" name="stateInputEdit"
                  nzPlaceHolder="Seleccione" [nzSize]="sizeM" [(ngModel)]="this.home.estado"
                  (nzOpenChange)="rotateArrows($event,'estadoSelect')">
                  <nz-option *ngFor="let opt of propertyState" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="optionInput0" class="text-nowrap">Condición</label>
                <nz-select #optionInput0 class="d-block flex-column condicionSelect" name="optionInput0"
                  nzPlaceHolder="Compartir" [nzSize]="sizeM" [(ngModel)]="this.home.condicion"
                  (nzOpenChange)="rotateArrows($event,'condicionSelect')">
                  <nz-option *ngFor="let opt of condicion" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="precioFinal">Precio de venta<span *ngIf="this.home.precioInicial>this.home.precioFinal"
                    class="price-value text-decoration-line-through old-price ml-1 text-secondary">{{formatNumberWithCommas(this.home.precioInicial)+'€'}}</span><span
                    class="dimension ml-1"></span><span class="dimension under"
                    *ngIf="this.home.precioInicial > this.home.precioFinal"
                    style="color:#7ce800;">-{{this.discount(''+this.home.precioInicial,''+this.home.precioFinal)}}%</span></label>
                <input nz-input placeholder="€" [(ngModel)]="this.home.precioFinal" ngModel pattern="\d*" maxlength="8"
                  #precioFinal (keypress)="numberOnly($event)" name="precioFinal" [disabled]="this.saleTab.value" />
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="precioAlquiler">Precio/mes<span
                    *ngIf="this.home.precioAlquilerInicial > this.home.precioAlquiler"
                    class="price-value text-decoration-line-through old-price ml-1 text-secondary">{{formatNumberWithCommas(this.home.precioAlquilerInicial)+'€'}}</span><span
                    class="dimension ml-1"></span><span class="dimension under"
                    *ngIf="this.home.precioAlquilerInicial > this.home.precioAlquiler"
                    style="color:#7ce800;">-{{this.discount(''+this.home.precioAlquilerInicial,''+this.home.precioAlquiler)}}%</span></label>
                <input nz-input placeholder="€/mes" [(ngModel)]="this.home.precioAlquiler" ngModel pattern="\d*"
                  maxlength="5" #precioAlquiler (keypress)="numberOnly($event)" name="precioAlquiler"
                  [disabled]="this.home.condicion=='Venta'" [disabled]="this.rentTab.value" />
              </div>
            </div>
            <!--4rd row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="badgeInput" class="text-nowrap">Destacar</label>
                <nz-select class="d-block destacarSelect w-100" #badgeInput name="badgeInput" nzPlaceHolder=""
                  [nzSize]="sizeM" [(ngModel)]="this.home.destacar"
                  (nzOpenChange)="rotateArrows($event,'destacarSelect')">
                  <nz-option *ngFor="let opt of badge" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="colorDestacar" class="">Color Destacar</label>
                <div class="text-center">
                  <nz-color-picker nzTrigger="hover" name="colorDestacar" (ngModelChange)="checkBox($event)"
                    [(ngModel)]="this.home.colorDestacar"></nz-color-picker>
                </div>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="yearBuild">Antiguedad</label>
                <nz-date-picker id="yearBuild" #yearBuild nzMode="year" nzFormat="yyyy"
                  (ngModelChange)="checkBox($event)" class="d-block flex-column" name="yearBuild"
                  [(ngModel)]="this.yearAntiguedad" [nzDisabledDate]="disabledDatePost"></nz-date-picker>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="Orientacion">Orientación</label>
                <nz-select #Orientacion name="Orientacion" [nzPlaceHolder]="this.home.orientacion"
                  class="d-block flex-column orientacionSelect w-100"
                  (nzOpenChange)="rotateArrows($event,'orientacionSelect')" [nzSize]="sizeM"
                  [(ngModel)]="this.home.orientacion">
                  <nz-option *ngFor="let opt of orientacion" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
            </div>
            <!--5th row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="garage">Garage&nbsp;<i nz-tooltip [nzTooltipTrigger]="'click'"
                    nzTooltipTitle="Si la plaza se vende aparte introduzca el precio adicional"
                    class="bi bi-info-square"></i></label>
                <nz-select #garage name="garageInput" nzPlacement="topRight" class="d-block flex-column garageSelect"
                  [nzPlaceHolder]="this.home.garage" [nzDropdownRender]="renderTemplate" [nzSize]="sizeM"
                  (nzOpenChange)="rotateArrows($event,'garageSelect')" [(ngModel)]="this.home.garage">
                  <nz-option *ngFor="let opt of carPlaces" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
                <ng-template #renderTemplate>
                  <p-divider type="dashed"></p-divider>
                  <div class="container d-flex text-nowrap mt-2">
                    <input class="d-block" id="parkingOptional" nz-input #parkingOptional style="width:84px;"
                      (keypress)="numberOnly($event)" />
                    <a class="add-item d-block" (click)="addParkingPrice(parkingOptional)" nzTooltipPlacement="top"
                      nz-tooltip nzTooltipTitle="Puedes añadir el precio adicional de venta o de alquiler de la plaza">
                      <ion-icon name="add-outline"></ion-icon>Precio
                    </a>
                  </div>
                </ng-template>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <label for="city" class="d-flex flex-start">Ciudad</label>
                <button name="city" class="button is-success is-outlined is-small w-100" id="provButton" type="button"
                  (click)="locationMap('homes')">{{this.home.ciudad}}</button>
                <p-dialog header="&nbsp;Datos de mapas ©2024 Google" [modal]="true" [(visible)]="this.mainModal"
                  [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}"
                  (onHide)="closeDialog()">
                  <div id="map_2"
                    style="width: 100%; height: 290px; border-radius:5px; margin-top: 7px; display: none;">
                  </div>
                  <div class="row my-2 mx-3">
                    <button name="city" class="button is-dark is-outlined is-small" id="provButton2" type="button"
                      (click)="showCityResult()">Guardar</button>
                  </div>
                </p-dialog>
                <input #ciudad nz-input ngModel name="ciudad" class="form-control" [(ngModel)]="this.home.ciudad"
                  style="display:none;" required>
              </div>
              <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 mx-auto">
                <label for="viewsInput">Vistas</label>
                <nz-select #viewsInput name="viewsInput" class="d-block flex-column vistasSelect w-100"
                  (nzOpenChange)="rotateArrows($event,'vistasSelect')" nzPlaceHolder="Seleccione" [nzSize]="sizeM"
                  [(ngModel)]="this.preSelectedViews" nzMode="multiple" nzAllowClear>
                  <nz-option *ngFor="let opt of vistas" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
                <!--<p-floatLabel>
                    <label for="float-label" class="text-white d-block">Vistas</label>
                    <p-multiSelect [options]="views | keyvalue" optionLabel="value" placeholder="Vistas"
                      [maxSelectedLabels]="11" display="chip" [showClear]="true" [panelStyle]="{'width':'100%'}"
                      [selectionLimit]="11" [virtualScroll]="true" inputId="float-label" optionValue="value"
                      (onChange)="setReactiveValues($event.value,'vistas')" name="vistas" [filter]="true"
                      [virtualScrollItemSize]="43" class="multiselect-custom-virtual-scroll w-100"
                      [(ngModel)]="this.preSelectedViews">
                    </p-multiSelect>
                  </p-floatLabel>-->
              </div>
            </div>
            <!--6th row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 d-flex flex-column">
                <label for="descripcion" class="required">Descripción</label>
                <textarea rows="6" class="" required nz-input [(ngModel)]="this.home.descripcion"></textarea>
              </div>
            </div>
          </p-card>
          <!-- Project template -->
          <p-card header="General" *ngIf="this.home.tipo=='Proyecto nuevo'">
            <!--1st row-->
            <div class="row">
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="tipodeviaP" class="text-nowrap">Tipo de vía</label>
                <nz-select panelWidth="fit-content" #tipodeviaP name="tipodeviaP" class="viaSelectp w-100"
                  nzPlaceHolder="Calle, avenida, plaza..." [nzSize]="sizeM" [(ngModel)]="this.home.tipoDeVia"
                  (nzOpenChange)="rotateArrows($event,'viaSelectP')">
                  <nz-option *ngFor="let opt of tipo_de_via" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="calleP">Nombre</label>
                <input #calleP nz-input placeholder="Nombre de la vía p. ej. Paseo de la Castellana..."
                  [(ngModel)]="this.home.calle" name="calleP" id="calleP" />
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="numeroP">Numero</label>
                <input nz-input #numeroP placeholder="Número" ngModel pattern="\d*" maxlength="6"
                  (keypress)="numberOnly($event)" name="numeroP" [(ngModel)]="this.home.numero" />
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="distritoP">Distrito</label>
                <input nz-input #distritoP placeholder="Distrito" [(ngModel)]="this.home.distrito" name="distritoP" />
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="cityP" class="d-flex flex-start">Ciudad</label>
                <button name="cityP" class="button is-success is-outlined is-small w-100" id="provButton" type="button"
                  (click)="locationMap('projects')">{{this.home.ciudad}}</button>
                <p-dialog header="&nbsp;Datos de mapas ©2024 Google" [modal]="true" [(visible)]="this.mainModal"
                  [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}"
                  (onHide)="closeDialog()">
                  <div id="map_4"
                    style="width: 100%; height: 290px; border-radius:5px; margin-top: 7px; display: none;">
                  </div>
                  <div class="row my-2 mx-3">
                    <button name="cityPR" class="button is-dark is-outlined is-small" id="provButton" type="button"
                      (click)="showCityResult()">Guardar</button>
                  </div>
                </p-dialog>
                <input #ciudadP nz-input ngModel name="ciudadP" class="form-control" [(ngModel)]="this.home.ciudad"
                  style="display:none;" required>
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12">
                <label for="cpP">CP</label>
                <input nz-input #cpP placeholder="Código postal" ngModel pattern="\d*" maxlength="5"
                  (keypress)="numberOnly($event)" name="cpP" [(ngModel)]="this.home.cp" />
              </div>
            </div>
            <!--2nd row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-xl-2 col-lg-2 col-md-2 col-sm-6 col-xs-12 mb-auto">
                <label for="totalUnits" class="text-nowrap">Cantidad viviendas</label>
                <input nz-input #totalUnits placeholder="Total construido" ngModel pattern="\d*" maxlength="5"
                  (keypress)="numberOnly($event)" name="totalUnits" class="form-control p-1"
                  [(ngModel)]="this.home.totalViviendasConstruidas" />
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-6 align-self-start">
                <label for="roomsP" class="text-nowrap">De {{this.home.habitacionesDesde}} a
                  {{this.home.habitacionesHasta}}
                  dormitorios</label>
                <nz-input-group>
                  <div nz-row>
                    <div nz-col nzSpan="10" class="float-start">
                      <input nz-input #roomsFrom placeholder="" ngModel pattern="\d*" maxlength="4"
                        (keypress)="numberOnly($event)" name="roomsP" [(ngModel)]="this.home.habitacionesDesde" />
                    </div>
                    <div nz-col nzSpan="4" class="text-center">
                      <label class="mt-1">a</label>
                    </div>
                    <div nz-col nzSpan="10" class="float-end">
                      <input nz-input #roomsTo ngModel pattern="\d*" maxlength="4" (keypress)="numberOnly($event)"
                        name="roomsTo" [(ngModel)]="this.home.habitacionesHasta" />
                    </div>
                  </div>
                </nz-input-group>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-6 align-self-start">
                <label for="areasP" class="text-nowrap">Area de {{this.home.superficieDesde}} a
                  {{this.home.superficieHasta}} m²</label>
                <nz-input-group>
                  <div nz-row>
                    <div nz-col nzSpan="10" class="float-start">
                      <input nz-input #areasFrom placeholder="" ngModel pattern="\d*" maxlength="4"
                        (keypress)="numberOnly($event)" name="areasP" [(ngModel)]="this.home.superficieDesde" />
                    </div>
                    <div nz-col nzSpan="4" class="text-center">
                      <label class="mt-1">a</label>
                    </div>
                    <div nz-col nzSpan="10" class="float-end">
                      <input nz-input #areasTo ngModel pattern="\d*" maxlength="4" (keypress)="numberOnly($event)"
                        name="areasTo" [(ngModel)]="this.home.superficieHasta" />
                    </div>
                  </div>
                </nz-input-group>
              </div>
              <div class="col-xl-1 col-lg-1 col-md-1 col-sm-6 align-self-start">
                <label for="alturasP" class="text-nowrap">Alturas</label>
                <input nz-input #alturasP placeholder="Alturas" class="form-control p-1" ngModel pattern="\d*"
                  maxlength="6" (keypress)="numberOnly($event)" name="alturas" [(ngModel)]="this.home.alturas" />
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-6 align-items-start">
                <label for="pricesFromP" class="text-nowrap">Precio desde</label>
                <nz-input-group>
                  <div nz-row>
                    <div class="float-start w-100">
                      <input nz-input #pricesFromP placeholder="" ngModel pattern="\d*" maxlength="8"
                        (keypress)="numberOnly($event)" name="pricesFromP" [(ngModel)]="this.home.precioFinal" />
                    </div>
                  </div>
                </nz-input-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-xs-12 mx-auto">
                <label for="tipologiasP" class="text-nowrap">Tipologías</label>
                <nz-select nzMode="multiple" [nzPlaceHolder]="'Tipos'" nzAllowClear style="width:100%"
                  name="tipologiasP" [nzSize]="sizeM" (ngModelChange)="printSelect($event)"
                  [(ngModel)]="this.preSelectedTypes">
                  <ng-container>
                    <nz-option *ngFor="let opt of projectFeatures" [nzLabel]="opt" [nzValue]="opt"></nz-option>
                  </ng-container>
                </nz-select>
              </div>
            </div>
            <!--3rd row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="estadoObra" class="align-items-center">Estado construcción:</label>
                <nz-radio-group class="w-100 d-block" [(ngModel)]="this.home.estadoConstruccion" name="estadoObra"
                  nzButtonStyle="solid">
                  <label nz-radio-button nzValue=Terminado>Terminado</label>
                  <label nz-radio-button nzValue=EnCurso>En curso</label>
                </nz-radio-group>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12 d-flex flex-column"
                *ngIf="this.home.estadoConstruccion=='Terminado'">
                <label for="yearEndP" class="">Año construcción</label>
                <nz-date-picker id="yearEndP" placeholder="Año" #yearP nzMode="year" nzFormat="yyyy"
                  class="d-block flex-column form-control" name="yearEndP" [(ngModel)]="this.home.antiguedad"
                  [nzDisabledDate]="disabledDatePost"></nz-date-picker>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-6 col-xs-12"
                *ngIf="this.home.estadoConstruccion=='EnCurso'">
                <label for="yearPercentP" class=" text-nowrap">Progreso obra</label>
                <nz-input-group class="float-start" name="yearPercentP" [nzSuffix]="percetageFinished" [nzSize]="size">
                  <input nz-input name="totalEnded" id="yearPercentP" #yearPercentP [nzSize]="sizeL"
                    [(ngModel)]="this.home.porcentajeTerminado" class="form-control w-full mb-1" />
                </nz-input-group>
                <ng-template #percetageFinished>
                  <span><i class="bi bi-percent"></i></span>
                </ng-template>
                <!--<p-slider [(ngModel)]="this.home.porcentajeTerminado" [min]="0" [max]="100" class="w-full"/>-->
              </div>
              <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12">
                <label for="soldPercentP" class=" text-nowrap">% Vendido</label>
                <nz-input-group class="float-start" name="soldPercentP" [nzSuffix]="percetageTemplate" [nzSize]="size">
                  <input nz-input name="totalSold" id="soldPercentP" #soldPercentP [nzSize]="sizeL"
                    [(ngModel)]="this.home.porcentajeVendido" class="form-control w-full mb-1" />
                </nz-input-group>
                <ng-template #percetageTemplate>
                  <span><i class="bi bi-percent"></i></span>
                </ng-template>
                <!--<p-slider [(ngModel)]="this.home.porcentajeVendido" [min]="0" [max]="100" class="w-full" />-->
              </div>
              <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12 0d-flex flex-column"
                *ngIf="this.home.estadoConstruccion=='EnCurso'">
                <label for="endWorksP" class="">Fin de obra</label>
                <nz-date-picker id="endWorksP" placeholder="Año" #endWorksP nzMode="year" nzFormat="yyyy"
                  class="d-block flex-column form-control" name="endWorksP" [(ngModel)]="this.yearFindeObra"
                  [nzDisabledDate]="disabledDatePre"></nz-date-picker>
              </div>
              <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 d-flex flex-column">
                <label for="nameP">Nombre decorativo</label>
                <input #nameP nz-input placeholder="Residencial las palmeras..." [(ngModel)]="this.home.nombreProyecto"
                  name="namep" class="form-control" />
              </div>
            </div>
            <!--6th row-->
            <div class=" row mt-2 align-items-center">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 d-flex flex-column">
                <label for="descripcionP" class="required">Descripción</label>
                <textarea rows="6" class="" name="descripcionP" required nz-input
                  [(ngModel)]="this.home.descripcion"></textarea>
              </div>
            </div>
          </p-card>
        </div>
        <!--Energía y climatización-->
        <div class="form-group row mt-3 align-items-center">
          <p-card header="Energía y climatización">
            <div class="col-12">
              <mat-button-toggle (change)="this.home.aireAcondicionado= $event.source.checked"
                [checked]="this.home.aireAcondicionado" [value]="this.home.aireAcondicionado" class="mx-1 my-1">Aire
                acondicionado
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.calefaccion= $event.source.checked"
                [checked]="this.home.calefaccion" [value]="this.home.calefaccion" class="mx-1 my-1">Calefacción
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.gasNatural= $event.source.checked" [checked]="this.home.gasNatural"
                [value]="this.home.gasNatural" class="mx-1 my-1">Gas natural
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.aerotermia= $event.source.checked" [checked]="this.home.aerotermia"
                [value]="this.home.aerotermia" class="mx-1 my-1">Aerotermia
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.dobleAcristalamiento= $event.source.checked"
                [checked]="this.home.dobleAcristalamiento" [value]="this.home.dobleAcristalamiento"
                class="mx-1 my-1">Doble acristalamiento
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.panelesSolares= $event.source.checked"
                [checked]="this.home.panelesSolares" [value]="this.home.panelesSolares" class="mx-1 my-1">Paneles
                solares
              </mat-button-toggle>
              <mat-button-toggle (change)="this.home.ventilacionCruzada= $event.source.checked"
                [checked]="this.home.ventilacionCruzada" [value]="this.home.ventilacionCruzada"
                class="mx-1 my-1">Ventilación cruzada
              </mat-button-toggle>
            </div>
            <div class="form-group row mt-3 align-items-center">
              <div class="col-xl-5 col-lg-5 col-md-5 col-sm-12 col-xs-12 mx-auto">
                <label for="emisiones">Emisiones</label>
                <nz-select class="nzSelectL w-100 emisionesSelect" nzPlaceHolder="Emisiones" [nzSize]="size"
                  name="emisiones" [(ngModel)]="this.home.emisiones"
                  (nzOpenChange)="rotateArrows($event,'emisionesSelect')">
                  <nz-option *ngFor="let opt of calificacion_emisiones" [nzValue]=opt
                    [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-xl-5 col-lg-5 col-md-5 col-sm-12 col-xs-12 mx-auto">
                <label for="consumo">Consumo</label>
                <nz-select class="nzSelectL w-100 consumoSelect" nzPlaceHolder="Consumo" [nzSize]="size"
                  [(ngModel)]="this.home.consumo" (click)="rotateArrows($event,'consumoSelect')" name="consumo">
                  <nz-option *ngFor="let opt of calificacion_consumo" [nzValue]=opt [nzLabel]="opt">{{opt}}</nz-option>
                </nz-select>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-2 col-sm-12 col-xs-12 mx-auto">
                <label for="consumo" class="my-auto">Certificado energético</label>
                <div class="container" *ngIf="this.home.energyCertAsString && !this.imageChangedEventEnergyUpdate">
                  <img [src]="this.energyImage" style="aspect-ratio: 16/9;" alt="">
                </div>
                <div class="container">
                  <div class="row">
                    <image-cropper [imageChangedEvent]="imageChangedEventEnergyUpdate" [maintainAspectRatio]="false"
                      [aspectRatio]="16 / 9" format="png" (imageCropped)="imageCropped($event,'energyUpdate')"
                      (imageLoaded)="imageLoaded($event,'energyUpdate')" (cropperReady)="cropperReady()"
                      (loadImageFailed)="loadImageFailed()">
                    </image-cropper>
                  </div>
                  <div class="row">
                    <div class="col-10">
                      <div class="file is-small is-light is-boxed">
                        <label class="file-label">
                          <input class="file-input" type="file" name="resume"
                            (change)="fileChangeEvent($event,'energyUpdate')" accept="image/*" />
                          <span class="file-cta">
                            <c-badge color="success text-nowrap">{{this.tempEnergyTagNameUpdate}}</c-badge>
                            <span class="file-icon" style="color:#999;">
                              <i class="fas fa-cloud-upload-alt color-secondary"></i>
                            </span>
                            <span class="file-label text-secondary">Etiqueta</span>
                          </span>
                        </label>
                      </div>
                    </div>
                    <div class="col-2">
                      <button *ngIf="this.tempEnergyTagNameUpdate" class="my-auto btn-close"
                        (click)="clearEnergySelection('energyUpdate')"></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </p-card>
        </div>
        <!--Comunidad-->
        <div class="form-group row mt-3 align-items-center">
          <p-card header="Comunidad">
            <mat-button-toggle (change)="this.home.videoPortero= $event.source.checked"
              [checked]="this.home.videoPortero" [value]="this.home.videoPortero" class="mx-1 my-1">Video
              portero
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.piscinaComp= $event.source.checked" [checked]="this.home.piscinaComp"
              [value]="this.home.piscinaComp" class="mx-1 my-1">Piscina
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.tenis= $event.source.checked" [checked]="this.home.tenis"
              [value]="this.home.tenis" class="mx-1 my-1">Tenis
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.padel= $event.source.checked" [checked]="this.home.padel"
              [value]="this.home.padel" class="mx-1 my-1">Padel
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.sauna= $event.source.checked" [checked]="this.home.sauna"
              [value]="this.home.sauna" class="mx-1 my-1">Sauna
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.zonaDeOcio= $event.source.checked" [checked]="this.home.zonaDeOcio"
              [value]="this.home.zonaDeOcio" class="mx-1 my-1">Zona de ocio
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.jardin= $event.source.checked" [checked]="this.home.jardin"
              [value]="this.home.jardin" class="mx-1 my-1">Zonas verdes
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.columpios= $event.source.checked" [checked]="this.home.columpios"
              [value]="this.home.columpios" class="mx-1 my-1">Zona infantil
            </mat-button-toggle>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center">
          <p-card header="Seguridad">
            <mat-button-toggle (change)="this.home.recepcion24_7= $event.source.checked"
              [checked]="this.home.recepcion24_7" [value]="this.home.recepcion24_7" class="mx-1 my-1">Recepción 24/7
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.videoVigilancia= $event.source.checked"
              [checked]="this.home.videoVigilancia" [value]="this.home.videoVigilancia" class="mx-1 my-1">Video
              vigilancia
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.alarmaIncendios= $event.source.checked"
              [checked]="this.home.alarmaIncendios" [value]="this.home.alarmaIncendios" class="mx-1 my-1">Alarma de
              incendios
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.extintores= $event.source.checked" [checked]="this.home.extintores"
              [value]="this.home.extintores" class="mx-1 my-1">Rociadores de incendio
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.generadorEmergencia= $event.source.checked"
              [checked]="this.home.generadorEmergencia" [value]="this.home.generadorEmergencia"
              class="mx-1 my-1">Generador de emergencia
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.instalacionesDiscapacitados= $event.source.checked"
              [checked]="this.home.instalacionesDiscapacitados" [value]="this.home.instalacionesDiscapacitados"
              class="mx-1 my-1">Vivienda accesible
            </mat-button-toggle>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center">
          <p-card header="Extras">
            <mat-button-toggle (change)="this.home.ascensor= $event.source.checked" [checked]="this.home.ascensor"
              [value]="this.home.ascensor" class="mx-1 my-1">Ascensor
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.terraza= $event.source.checked" [checked]="this.home.terraza"
              [value]="this.home.terraza" class="mx-1 my-1">Terraza
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.balcon= $event.source.checked" [checked]="this.home.balcon"
              [value]="this.home.balcon" class="mx-1 my-1">Balcón
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.parquet= $event.source.checked" [checked]="this.home.parquet"
              [value]="this.home.parquet" class="mx-1 my-1">Parquet
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.cabinaHidromasaje= $event.source.checked"
              [checked]="this.home.cabinaHidromasaje" [value]="this.home.cabinaHidromasaje" class="mx-1 my-1">Cabina de
              hidromasaje
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.jacuzzi= $event.source.checked" [checked]="this.home.jacuzzi"
              [value]="this.home.jacuzzi" class="mx-1 my-1">Jacuzzi
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.piscinaPrivada= $event.source.checked"
              [checked]="this.home.piscinaPrivada" [value]="this.home.piscinaPrivada" class="mx-1 my-1">Piscina
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.gym= $event.source.checked" [checked]="this.home.gym"
              [value]="this.home.gym" class="mx-1 my-1">Gimnasio
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.golf= $event.source.checked" [checked]="this.home.golf"
              [value]="this.home.golf" class="mx-1 my-1">Golf a pocos km
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.armariosEmpotrados= $event.source.checked"
              [checked]="this.home.armariosEmpotrados" [value]="this.home.armariosEmpotrados" class="mx-1 my-1">Armarios
              empotrados
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.amueblado= $event.source.checked" [checked]="this.home.amueblado"
              [value]="this.home.amueblado" class="mx-1 my-1">Amueblado completo
            </mat-button-toggle>
            <mat-button-toggle (change)="this.home.trastero= $event.source.checked" [checked]="this.home.trastero"
              [value]="this.home.trastero" class="mx-1 my-1">Trastero
            </mat-button-toggle>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center"
          *ngIf="this.home.condicion=='Alquiler' || this.home.condicion == 'Alquiler y venta' || this.home.condicion == 'Compartir'">
          <p-card header="Condiciones de alquiler">
            <div class="row">
              <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="fianza">Fianza</label>
                <mat-button-toggle-group name="fianza" aria-label="fianza" [(ngModel)]="this.home.fianza">
                  <mat-button-toggle value="No">No</mat-button-toggle>
                  <mat-button-toggle value="1">1 Mes</mat-button-toggle>
                  <mat-button-toggle value="2">2 Meses</mat-button-toggle>
                  <mat-button-toggle value="+2">Consultar</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="mascotas">Se admiten mascotas</label>
                <mat-button-toggle-group name="mascotas" aria-label="mascotas" [(ngModel)]="this.home.mascotas">
                  <mat-button-toggle value="Si">Si</mat-button-toggle>
                  <mat-button-toggle value="No">No</mat-button-toggle>
                  <mat-button-toggle value="Consultar">Consultar</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block text-nowrap" for="estancia">Tipo de estancia</label>
                <mat-button-toggle-group name="estancia" aria-label="estancia" [(ngModel)]="this.home.estanciaMinima">
                  <mat-button-toggle value="Anual">Anual</mat-button-toggle>
                  <mat-button-toggle value="Temporal">Temporal</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <div class="ml-3">
                  <label class="d-block" for="monthAvailable">Disponibilidad</label>
                  <nz-date-picker id="monthAvailable" #monthAvailable nzMode="month" nzFormat="yyyy/MM"
                    [(ngModel)]="this.dateMonthFormat" (ngModelChange)="setMonth($event,'user-pro')"
                    [nzDisabledDate]="disabledDatePre" name="monthAvailable" class="mt-1"></nz-date-picker>&nbsp;
                  <i nz-tooltip [nzTooltipTrigger]="'click'"
                    nzTooltipTitle="Si la vivienda no está vacía, seleccione el mes para cuando estará disponible"
                    class="bi bi-info-square"></i>
                </div>
              </div>
            </div>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center" *ngIf="this.home.condicion == 'Compartir'">
          <p-card header="Acerca de compartir">
            <div class="row">
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="fumar">Se puede fumar</label>
                <mat-button-toggle-group name="fumar" aria-label="fumar" [(ngModel)]="this.home.sepuedeFumar">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="parejas">Se admiten parejas</label>
                <mat-button-toggle-group name="parejas" aria-label="parejas" [(ngModel)]="this.home.seadmitenParejas">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="menores">Se admiten menores de edad</label>
                <mat-button-toggle-group name="menores" aria-label="menores"
                  [(ngModel)]="this.home.seadmitenMenoresdeedad">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="mochileros">Se admiten mochileros</label>
                <mat-button-toggle-group name="mochileros" aria-label="mochileros"
                  [(ngModel)]="this.home.seadmitenMochileros">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="jubilados">Se admiten jubilados</label>
                <mat-button-toggle-group name="jubilados" aria-label="jubilados"
                  [(ngModel)]="this.home.seadmitenJubilados">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="lgtbi">Se admite LGTBI</label>
                <mat-button-toggle-group name="lgtbi" aria-label="lgtbi" [(ngModel)]="this.home.seadmiteLGTBI">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="propietariovive">El propietario vive en la casa</label>
                <mat-button-toggle-group name="propietariovive" aria-label="propietariovive"
                  [(ngModel)]="this.home.propietarioviveEnlacasa">
                  <mat-button-toggle [value]="true">Si</mat-button-toggle>
                  <mat-button-toggle [value]="false">No</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
              <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="gastos">Gastos</label>
                <mat-button-toggle-group name="gastos" aria-label="gastos" [(ngModel)]="this.home.gastos">
                  <mat-button-toggle value="Incluidos">Incluidos</mat-button-toggle>
                  <mat-button-toggle value="Aparte">Aparte</mat-button-toggle>
                </mat-button-toggle-group>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="perfil_compartir">Perfil</label>
                <nz-input-group class="float-start" [nzSuffix]="perfilCompartir" [nzSize]="size">
                  <input nz-input #perfil_compartir name="perfil_compartir" [(ngModel)]="this.home.perfilCompartir" />
                </nz-input-group>
                <ng-template #perfilCompartir>
                  <i nz-tooltip [nzTooltipTrigger]="'click'" nzTooltipTitle="Hombre, mujer, indiferente"
                    class="bi bi-info-square"></i>
                </ng-template>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="ambienteCompartir">Ambiente</label>
                <nz-input-group class="float-start" [nzSuffix]="ambienteCompartir" [nzSize]="size">
                  <input nz-input #ambiente_compartir name="ambienteCompartir" [(ngModel)]="this.home.ambiente" />
                </nz-input-group>
                <ng-template #ambienteCompartir>
                  <i nz-tooltip [nzTooltipTrigger]="'click'" nzTooltipTitle="Ninguno, estudiantes, funcionarios..."
                    class="bi bi-info-square"></i>
                </ng-template>
              </div>
              <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                <label class="d-block" for="habitantes">Habitantes actualmente</label>
                <nz-input-group class="float-start" [nzSuffix]="habitantesActualmente" [nzSize]="size">
                  <input nz-input #habitantes_Actualmente name="habitantes"
                    [(ngModel)]="this.home.habitantesActualmente" />
                </nz-input-group>
                <ng-template #habitantesActualmente>
                  <i nz-tooltip [nzTooltipTrigger]="'click'" nzTooltipTitle="Ninguno, 1, 2..."
                    class="bi bi-info-square"></i>
                </ng-template>
              </div>
            </div>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center">
          <p-card header="Movilidad" styleClass="mobility-modal">
            <div class="container-fluid">
              <div class="row justify-content-center" style="background-color: #d9d9d9;">
                <ng-template #extraSchoolBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][0]" name="cschool1" inputId="cschool1"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][1]" name="cschool2" inputId="cschool2"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][2]" name="cschool3" inputId="cschool3"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][3]" name="cschool4" inputId="cschool4"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][4]" name="cschool5" inputId="cschool5"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[0][5]" name="cschool6" inputId="cschool6"
                    [binary]="true" [disabled]="true" />
                </ng-template>
                <nz-collapse>
                  <nz-collapse-panel (click)="resizeMap()" nzHeader="Colegios" [nzExtra]="extraSchoolBadge">
                    <div>
                      <div class="row" *ngFor="let appHome of colegio; let i =index">
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="nombrec{{i}}" class="float-start">Nombre</label>
                          <input nz-input [nzSize]="size" name="nombrec{{i}}"
                            [attr.disabled]="this.stateTextfields[0][i]?true:null" [(ngModel)]="this.colegio[i].nombre"
                            placeholder="Nombre" id="f1c{{i}}n">
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="ensenyanzac{{i}}" class="float-start">Enseñanza</label>
                          <nz-select class="w-100 f1c{{i}}e" [nzSize]="size"
                            (nzOpenChange)="rotateArrows($event,'f1c'+i+'e')" [nzDisabled]="this.stateTextfields[0][i]"
                            name="ensenyanzac{{i}}" [(ngModel)]="this.colegio[i].ensenyanza">
                            <nz-option class="w-100" id="f1c{{i}}e" *ngFor="let opt of ensenyanza" [nzValue]=opt
                              [nzLabel]="opt">{{opt}}</nz-option>
                          </nz-select>
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="instic{{i}}" class="float-start">Institución</label>
                          <nz-select class="w-100 f1c{{i}}i" [nzSize]="size" name="instic{{i}}"
                            [nzDisabled]="this.stateTextfields[0][i]" (nzOpenChange)="rotateArrows($event,'f1c'+i+'i')"
                            [(ngModel)]="this.colegio[i].institucion">
                            <nz-option class="w-100" *ngFor="let opt of institucion" [nzValue]=opt
                              [nzLabel]="opt">{{opt}}</nz-option>
                          </nz-select>
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto d-flex flex-column">
                          <label for="webc{{i}}" class="float-start">Página web</label>
                          <input nz-input [nzSize]="size" name="webc{{i}}"
                            [attr.disabled]="this.stateTextfields[0][i]?true:null" placeholder="www"
                            [(ngModel)]="this.colegio[i].web" />
                        </div>
                        <div
                          class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center d-flex flex-row">
                          <button id="colegio{{i}}" type="button" *ngIf="!this.stateTextfields[0][i]?true:null"
                            class="button is-link is-rounded is-small is-responsive w-100 mt-2 mx-auto btnDistancia"
                            (click)="setRoute('#808080', this.sc, 'colegio',i,'colegio'+i,'colegio'+i+'ok','btndltColegio'+i,0,i,map_3)">Distancia</button>
                          <button id="colegio{{i}}ok" type="button" style="background:#1ebea5;"
                            *ngIf="this.stateTextfields[0][i]?true:null"
                            class="button is-link is-rounded is-small is-responsive w-100 mt-2 mx-auto  btnDistancia">{{this.colegio[i].distancia}}</button>
                          <button class="button is-danger is-rounded is-small is-responsive w-100 mt-2 mx-auto btndlt"
                            id="btndltColegio{{i}}" *ngIf="this.stateTextfields[0][i]?true:null"
                            (click)="clearService('colegio',i)"><i style="color:white;"
                              class="fas fa-trash"></i></button>
                        </div>
                        <mat-divider class="mt-2"></mat-divider>
                      </div>
                    </div>
                  </nz-collapse-panel>
                </nz-collapse>
                <ng-template #extraUniversityBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[1][0]" name="cuniversity1" inputId="cuniversity1"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[1][1]" name="cuniversity2" inputId="cuniversity2"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[1][2]" name="cuniversity3" inputId="cuniversity3"
                    [binary]="true" [disabled]="true" />
                </ng-template>
                <nz-collapse>
                  <nz-collapse-panel (click)="resizeMap()" nzHeader="Universidades" [nzExtra]="extraUniversityBadge">
                    <div class="container-fluid">
                      <div class="row" *ngFor="let appHome of universidad; let i =index">
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="nombreu{{i}}" class="float-start">Nombre</label>
                          <input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[1][i]?true:null"
                            [(ngModel)]="this.universidad[i].nombre" placeholder="Nombre" name="nombreu{{i}}" />
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="rama{{i}}" class="float-start">Rama de conocimiento</label>
                          <nz-select class="w-100 f2r{{i}}u" [nzSize]="size" [nzDisabled]="this.stateTextfields[1][i]"
                            name="rama{{i}}" [(ngModel)]="this.universidad[i].rama"
                            (nzOpenChange)="rotateArrows($event,'f2r'+i+'u')">
                            <nz-option class="w-100" *ngFor="let opt of ramas" [nzValue]=opt
                              [nzLabel]="opt">{{opt}}</nz-option>
                          </nz-select>
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center">
                          <label for="instiu{{i}}" class="float-start">Institución</label>
                          <nz-select class="w-100 f2i{{i}}u" [nzSize]="size" [nzDisabled]="this.stateTextfields[1][i]"
                            [(ngModel)]="this.universidad[i].institucion" name="instiu{{i}}"
                            (nzOpenChange)="rotateArrows($event,'f2i'+i+'u')">
                            <nz-option class="w-100" *ngFor="let opt of institucion" [nzValue]=opt
                              [nzLabel]="opt">{{opt}}</nz-option>
                          </nz-select>
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12 mx-auto d-flex flex-column">
                          <label for="webu{{i}}" class="float-start">Página web</label>
                          <input nz-input [nzSize]="size" placeholder="www" name="webu{{i}}"
                            [attr.disabled]="this.stateTextfields[1][i]?true:null"
                            [(ngModel)]="this.universidad[i].web" />
                        </div>
                        <div
                          class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12 mx-auto align-items-center d-flex flex-row">
                          <button id="univ{{i}}" type="button" *ngIf="!this.stateTextfields[1][i]?true:null"
                            class="button is-link is-rounded is-small is-responsive w-100 mt-2 mx-auto btnDistancia"
                            (click)="setRoute('#128c7e', this.uni, 'universidad',i,'univ'+i,'univ'+i+'ok','btndltUniv'+i,1,i,map_3)">Distancia</button>
                          <button id="univ{{i}}ok" type="button" style="background:#1ebea5"
                            *ngIf="this.stateTextfields[1][i]?true:null"
                            class="btnDistancia button is-link is-rounded is-small is-responsive w-100 mt-2 mx-auto ">{{this.universidad[i].distancia}}</button>
                          <button class="button is-danger is-rounded is-small is-responsive w-100 mt-2 mx-auto btndlt"
                            id="btndltUniv{{i}}" *ngIf="this.stateTextfields[1][i]?true:null"
                            (click)="clearService('universidad',i)"><i style="color:white;"
                              class="fas fa-trash"></i></button>
                        </div>
                      </div>
                    </div>
                  </nz-collapse-panel>
                </nz-collapse>
                <ng-template #extraBusBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][0]" name="cbus1" inputId="cbus1" [binary]="true"
                    [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][1]" name="cbus2" inputId="cbus2" [binary]="true"
                    [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][2]" name="cbus3" inputId="cbus3" [binary]="true"
                    [disabled]="true" />
                </ng-template>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 p-0">
                  <nz-collapse>
                    <nz-collapse-panel (click)="resizeMap()" nzHeader="Autobuses" [nzExtra]="extraBusBadge">
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Parada</th>
                              <th scope="col">Líneas</th>
                              <th scope="col">Distancia</th>
                            </tr>
                          </thead>
                          <tbody *ngFor="let appHome of this.autobus; let i =index">
                            <tr>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[2][i]?true:null"
                                  [(ngModel)]="this.autobus[i].parada" placeholder="Parada" name="paradab{{i}}" />
                              </td>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[2][i]?true:null"
                                  [(ngModel)]="this.autobus[i].lineas" placeholder="Líneas" name="lineasb{{i}}" />
                              </td>
                              <td>
                                <div class="align-items-center d-flex flex-row">
                                  <button id="bus{{i}}" type="button" *ngIf="!this.stateTextfields[2][i]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia"
                                    (click)="setRoute('#960018', this.busic,'autobus',i,'bus'+i,'bus'+i+'ok','btndltBus'+i,2,i,map_3)">Distancia</button>
                                  <button id="bus{{i}}ok" type="button" style="background:#1ebea5"
                                    *ngIf="this.stateTextfields[2][i]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia">{{this.autobus[i].distancia}}</button>
                                  <button
                                    class="button is-danger is-rounded is-small is-responsive w-100 mx-auto btndlt"
                                    id="btndltBus{{i}}" *ngIf="this.stateTextfields[2][i]?true:null"
                                    (click)="clearService('autobus',i)"><i style="color:white;"
                                      class="fas fa-trash"></i></button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
                <ng-template #extraSubwayBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[3][0]" name="cmetro" inputId="cmetro" [binary]="true"
                    [disabled]="true" />
                </ng-template>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 p-0">
                  <nz-collapse>
                    <nz-collapse-panel (click)="resizeMap()" nzHeader="Metro" [nzExtra]="extraSubwayBadge">
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Parada</th>
                              <th scope="col">Líneas</th>
                              <th scope="col">Distancia</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[3][0]?true:null"
                                  [(ngModel)]="this.metro[0].parada" placeholder="Parada" name="paradametro" />
                              </td>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[3][0]?true:null"
                                  [(ngModel)]="this.metro[0].lineas" placeholder="Líneas" name="lineasmetro" />
                              </td>
                              <td>
                                <div class="btn-group">
                                  <button id="metro0" type="button" *ngIf="!this.stateTextfields[3][0]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia"
                                    (click)="setRoute('#d6a323', this.swi,'metro',0,'metro0','metro0ok','btndltMetro0',3,0,map_3)">Distancia</button>
                                  <button id="metro0ok" type="button" style="background:#1ebea5"
                                    *ngIf="this.stateTextfields[3][0]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia">{{this.metro[0].distancia}}</button>
                                  <button
                                    class="button is-danger is-rounded is-small is-responsive w-100 mx-auto btndlt"
                                    id="btndltMetro0" *ngIf="this.stateTextfields[3][0]?true:null"
                                    (click)="clearService('metro',0)"><i style="color:white;"
                                      class="fas fa-trash"></i></button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
                <ng-template #extraMarketBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][3]" name="cmarket1" inputId="cmarket1"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][4]" name="cmarket2" inputId="cmarket2"
                    [binary]="true" [disabled]="true" />
                  <p-checkbox [(ngModel)]="this.stateTextfields[2][5]" name="cmarket3" inputId="cmarket3"
                    [binary]="true" [disabled]="true" />
                </ng-template>
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 p-0">
                  <nz-collapse>
                    <nz-collapse-panel (click)="resizeMap()" nzHeader="Supermercados" [nzExtra]="extraMarketBadge">
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Nombre</th>
                              <th scope="col">Distancia</th>
                            </tr>
                          </thead>
                          <tbody *ngFor="let appHome of this.mercados; let i =index">
                            <tr>
                              <td><input nz-input [nzSize]="size" name="marketname{{i}}"
                                  [attr.disabled]="this.stateTextfields[2][i+3]?true:null"
                                  [(ngModel)]="this.mercados[i].nombre" placeholder="Nombre" />
                              </td>
                              <td>
                                <div class="btn-group">
                                  <button id="mercado{{i}}" type="button"
                                    *ngIf="!this.stateTextfields[2][i+3]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia"
                                    (click)="setRoute('#6f5e53', this.mki,'mercados',i,'mercado'+i,'mercado'+i+'ok','btndltMercado'+i,2,i+3,map_3)">Distancia</button>
                                  <button id="mercado{{i}}ok" type="button" style="background:#1ebea5"
                                    *ngIf="this.stateTextfields[2][i+3]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia">{{this.mercados[i].distancia}}</button>
                                  <button
                                    class="button is-danger is-rounded is-small is-responsive w-100 mx-auto btndlt"
                                    id="btndltMercado{{i}}" *ngIf="this.stateTextfields[2][i+3]?true:null"
                                    (click)="clearService('mercados',i)"><i style="color:white;"
                                      class="fas fa-trash"></i></button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
                <ng-template #extraAirportBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[3][1]" name="cairport" inputId="cairport"
                    [binary]="true" [disabled]="true" />
                </ng-template>
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 p-0">
                  <nz-collapse>
                    <nz-collapse-panel (click)="resizeMap()" nzHeader="Aeropuerto" [nzExtra]="extraAirportBadge">
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Nombre</th>
                              <th scope="col">Distancia</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[3][1]?true:null"
                                  [(ngModel)]="this.aeropuerto[0].nombre" placeholder="Nombre" name="airportname" />
                              </td>
                              <td>
                                <div class="btn-group">
                                  <button id="aero0" type="button" *ngIf="!this.stateTextfields[3][1]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia"
                                    (click)="setRoute('#3200ff', this.airp,'aeropuerto',0,'aero0','aero0ok','btndltAero0',3,1,map_3)">Distancia</button>
                                  <button id="aero0ok" type="button" style="background:#1ebea5"
                                    *ngIf="this.stateTextfields[3][1]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia">{{this.aeropuerto[0].distancia}}</button>
                                  <button
                                    class="button is-danger is-rounded is-small is-responsive w-100 mx-auto btndlt"
                                    id="btndltAero0" *ngIf="this.stateTextfields[3][1]?true:null"
                                    (click)="clearService('aeropuerto',0)"><i style="color: white;"
                                      class="fas fa-trash"></i></button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
                <ng-template #extraBeachBadge>
                  <p-checkbox [(ngModel)]="this.stateTextfields[3][2]" name="cbeach" inputId="cbeach" [binary]="true"
                    [disabled]="true" />
                </ng-template>
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12 p-0">
                  <nz-collapse>
                    <nz-collapse-panel (click)="resizeMap()" [nzExtra]="extraBeachBadge" nzHeader="Playa">
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Nombre</th>
                              <th scope="col">Distancia
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td><input nz-input [nzSize]="size" [attr.disabled]="this.stateTextfields[3][2]?true:null"
                                  [(ngModel)]="this.beach[0].nombre" placeholder="Nombre" name="beachname" />
                              </td>
                              <td>
                                <div class="btn-group">
                                  <button id="beach0" type="button" *ngIf="!this.stateTextfields[3][2]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia"
                                    (click)="setRoute('dodgerblue', this.bch,'beach',0,'beach0','beach0ok','btndltBeach0',3,2,map_3)">Distancia</button>
                                  <button id="beach0ok" type="button" style="background:#1ebea5"
                                    *ngIf="this.stateTextfields[3][2]?true:null"
                                    class="button is-link is-rounded is-small is-responsive w-100 mx-auto btnDistancia">{{this.beach[0].distancia}}</button>
                                  <button
                                    class="button is-danger is-rounded is-small is-responsive w-100 mx-auto btndlt"
                                    id="btndltBeach0" *ngIf="this.stateTextfields[3][2]?true:null"
                                    (click)="clearService('playa',0)"><i style="color: white;"
                                      class="fas fa-trash"></i></button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
              </div>
            </div>
            <div style="height: 50vh;">
              <div id="map_3" #map_3 class="w-100 h-100 d-flex pr-0 mt-2 form-control">
                <p-toast [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'1000ms'"
                  [hideTransitionOptions]="'1000ms'" [showTransformOptions]="'translateX(100%)'" />
              </div>
            </div>
          </p-card>
        </div>
        <div class="form-group row mt-3 align-items-center mb-5 pb-2">
          <p-card header="Multimedia">
            <!-- Fotos -->
            <dropzone [config]="config" [message]="this.dropzoneMessage" class="border" (error)="onUploadError($event)"
              (success)="onUploadSuccessToEdit($event)" (removedFile)="onRemoveEdit($event)"
              (init)="dropzoneInit($event)">
            </dropzone>
          </p-card>
        </div>
        <footer class="fixed-bottom p-3 bg-dark-subtle">
          <div class="container-fluid">
            <button class="button is-link waves-effect waves-light"
              [disabled]="showLoading || (!this.home.precioFinal&&!this.home.precioAlquiler)"
              (click)="updateHomeForm.ngSubmit.emit()">
              <span *ngIf="showLoading" class="spinner-border text-light" role="status"
                style="width: 1.5rem; height: 1.5rem; ">
              </span>
              <span *ngIf="!showLoading">Guardar cambios</span>
            </button>
          </div>
        </footer>
      </form>
      <ngx-loading [show]="showLoading" [config]="{ backdropBorderRadius: '3px',
              animationType: ngxLoadingAnimationTypes.rectangleBounce, }"
        [template]="customLoadingTemplate"></ngx-loading>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="container-fluid">
      <div class="row">
        <!-- Main Sidebar -->
        <aside class="main-sidebar col-12 col-md-3 col-lg-2 px-0"><!--open-->
          <div class="main-navbar">
            <nav class="navbar align-items-stretch navbar-light bg-white flex-md-nowrap border-bottom p-0">
              <a class="navbar-brand w-100 mr-0" style="line-height: 25px;">
                <div class="d-table m-auto">
                  <img id="main-logo" class="d-inline-block align-top mr-1" style="max-width: 25px;"
                    src="https://i.ibb.co/6YkD164/unknown-house.png" alt="unknown-house">
                  <span class="d-none d-md-inline ml-1">Dashboard</span>
                </div>
              </a>
              <a class="toggle-sidebar d-sm-inline d-md-none d-lg-none" id="toggle-sidebar">
                <i class="material-icons">&#xE5C4;</i>
              </a>
            </nav>
          </div>
          <form action="#" class="main-sidebar__search w-100 border-right d-sm-flex d-md-none d-lg-none">
            <div class="input-group input-group-seamless ml-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-search"></i>
                </div>
              </div>
              <input class="navbar-search form-control" type="text" placeholder="Search for something..."
                aria-label="Search">
            </div>
          </form>
          <div class="nav-wrapper">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#stats"
                  (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">trending_up</i>
                  <span>Estado</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " data-bs-toggle="tab" href="#reviews" (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">star</i>
                  <span>Valoraciones</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " data-bs-toggle="tab" href="#messages" (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">chat</i>
                  <span>Mensajes</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " disabled>
                  <i class="material-icons">remove_circle</i>
                  <span>Reservado</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " data-bs-toggle="tab" href="#tables" id="tables-link"
                  (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">home</i>
                  <span>Anuncios</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " data-bs-toggle="tab" href="#profile" (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">person</i>
                  <span>Perfil</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " data-bs-toggle="tab" href="#ads" id="favourites"
                  (click)="this.clickButton('toggle-sidebar')">
                  <i class="material-icons">favorite</i>
                  <span>Favoritos</span>
                </a>
              </li>
            </ul>
          </div>
        </aside>
        <!-- End Main Sidebar -->
        <main class="main-content col-lg-10 col-md-9 col-sm-12 p-0 offset-lg-2 offset-md-3 bg-white">
          <div class="main-navbar sticky-top bg-white">
            <!-- Main Navbar -->
            <nav class="navbar align-items-stretch navbar-light flex-md-nowrap p-0 bg-white">
              <div class="main-navbar__search w-100 d-none d-md-flex d-lg-flex" *ngIf='this.brandingColor'
                [style.background-color]="this.brandingColor">
                <div class="mx-auto order-0 d-flex" *ngIf="this.tempBranding==null && this.user.brandImageAsString">
                  <a class="navbar-brand d-none d-md-block">
                    <img class="brandImage" [src]="this.user.brandImage.imageUrl" alt="">
                  </a>
                </div>
                <div class="mx-auto order-0"
                  *ngIf="this.tempBranding==null && (this.user.brandImageAsString==undefined || this.user.brandImageAsString==null)">
                  <a class="navbar-brand d-none d-md-block">
                    <!--<img class="brandImage" [src]="this.user.brandImage.imageUrl" alt="">-->
                  </a>
                </div>
                <div class="mx-auto order-0 d-flex" *ngIf="this.tempBranding!=null">
                  <a class="navbar-brand d-none d-md-block">
                    <img class="brandImage" [src]="this.croppedImageBranding" alt="">
                  </a>
                </div>
                <!--<div class="input-group input-group-seamless ml-3">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <i class="fas fa-search"></i>
                </div>
              </div>
              <input class="navbar-search form-control" type="text" placeholder="Search for something..."
                aria-label="Search">
            </div>-->
              </div>
              <ul class="navbar-nav border-left flex-row ">
                <li class="nav-item border-right dropdown notifications">
                  <a class="nav-link nav-link-icon text-center" href="" role="button" id="dropdownMenuLink"
                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <div class="nav-link-icon__wrapper">
                      <i class="material-icons">&#xE7F4;</i>
                      <span class="badge badge-pill badge-danger">2</span>
                    </div>
                  </a>
                  <div class="dropdown-menu dropdown-menu-small" aria-labelledby="dropdownMenuLink">
                    <a class="dropdown-item" href="">
                      <div class="notification__icon-wrapper">
                        <div class="notification__icon">
                          <i class="material-icons">&#xE6E1;</i>
                        </div>
                      </div>
                      <div class="notification__content">
                        <span class="notification__category">Analytics</span>
                        <p>Your website’s active users count increased by
                          <span class="text-success text-semibold">28%</span> in the last week. Great job!
                        </p>
                      </div>
                    </a>
                    <a class="dropdown-item" href="">
                      <div class="notification__icon-wrapper">
                        <div class="notification__icon">
                          <i class="material-icons">&#xE8D1;</i>
                        </div>
                      </div>
                      <div class="notification__content">
                        <span class="notification__category">Sales</span>
                        <p>Last week your store’s sales count decreased by
                          <span class="text-danger text-semibold">5.52%</span>. It could have been worse!
                        </p>
                      </div>
                    </a>
                    <a class="dropdown-item notification__all text-center" href=""> View all Notifications </a>
                  </div>
                </li>
                <li class="nav-item dropdown" ngbDropdown>
                  <a class="nav-link dropdown-toggle text-nowrap px-3" ngbDropdownToggle role="button"
                    aria-haspopup="true" aria-expanded="false">
                    <img class="user-avatar rounded-circle mr-2" [src]="this.user?.profileImage.imageUrl"
                      alt="User Avatar">
                    <span class="d-none d-md-inline-block">{{this.user?.firstname}} {{this.user?.lastname}}</span>
                  </a>
                  <div class="dropdown-menu dropdown-menu-small" ngbDropdownMenu>
                    <a class="dropdown-item bg-white" ngbDropdownItem routerLink="/home">
                      <i class="material-icons">map</i> Mapa</a>
                    <a class="dropdown-item bg-white" ngbDropdownItem routerLink="/admin">
                      <i class="material-icons">storage</i> Admin area</a>
                    <a class="dropdown-item bg-white" ngbDropdownItem>
                      <i class="material-icons">note_add</i> Add New Post</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item text-danger bg-white" ngbDropdownItem (click)="onLogOut()"
                      routerLink="/home">
                      <i class="material-icons text-danger">&#xE879;</i> Salir </a>
                  </div>
                </li>
              </ul>
              <nav class="nav">
                <a class="nav-link nav-link-icon toggle-sidebar d-md-inline d-lg-none text-center border-left">
                  <i class="material-icons">&#xE5D2;</i>
                </a>
              </nav>
            </nav>
          </div>
          <!-- / .main-navbar -->
          <div class="tab-content">
            <div class="main-content-container container-fluid px-4 tab-pane fade show active" id="stats">
              <!-- Page Header -->
              <div class="page-header row no-gutters py-4">
                <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                  <span class="text-uppercase page-subtitle">Estadísticas</span>
                  <h6 class="text-secondary" style="letter-spacing: .5px;">Últimos días</h6>
                </div>
              </div>
              <!-- End Page Header -->
              <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 mb-4">
                  <nz-collapse nzAccordion>
                    <nz-collapse-panel [nzHeader]="'Visitas últimos días'">
                      <div class="stats-small stats-small--1 card card-small"
                        *ngFor="let property of this.user?.domains;let i=index">
                        <div class="card-body p-0 d-flex">
                          <div class="w-100" id="chart-line{{i}}"></div>
                        </div>
                      </div>
                    </nz-collapse-panel>
                  </nz-collapse>
                </div>
              </div>
              <!-- End Small Stats Blocks -->
              <div class="row h-100">

              </div>
            </div>
            <!--Messages-->
            <div class="main-content-container container-fluid tab-pane fade" id="messages">
              <!--<div class="page-header row no-gutters py-4">-->
              <div class="col-12 col-sm-4 text-center text-sm-left mb-0 mr-2 " style="min-width: 70%;">
                <!--<span class="text-uppercase page-subtitle">Mensajes</span>
            <h3 class="page-title">Mis notificaciones</h3>-->
                <div class="row " style="height: 100vh;">
                  <div class="col-12 mx-auto mt-2 ">
                    <div class="card chat-app">
                      <div id="plist" class="people-list border-top">
                        <div class="input-group" style="position: relative;">
                          <input type="text" class="form-control" placeholder="Search..." style="padding-left:35px;">
                          <i class="fa fa-search" style="position: absolute; top:10px; left: 15px;"></i>
                        </div>
                        <ul class="list-unstyled chat-list mt-2 mb-0">
                          @for(user of this.user.chatsOpened; track user){
                          <li class="clearfix" [ngClass]="selectedUserId == user.id ? 'active' : ''"
                            (click)="changeUser(user)">
                            <img *ngIf="this.user.profileImageAsString"
                              src="{{getAvatar(user.profileImageAsString).imageUrl}}" alt="avatar">
                            <img *ngIf="!this.user.profileImageAsString" src="{{getProfileImage()}}" alt="avatar">
                            <div class="about">
                              <div class="name">{{user.username}}</div>
                              <div class="status"> <i class="fa fa-circle"
                                  [ngClass]="user.status === 'online' ? 'online' : 'offline'"></i> {{user.status}}
                              </div>
                            </div>
                          </li>
                          }
                        </ul>
                      </div>
                      @if(selectedUserId){
                      <div class="chat">
                        <div class="chat-header clearfix">
                          <div class="row">
                            <div class="col-lg-6">
                              <a href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#view_info">
                                <img src="{{getAvatar(selectedUser.profileImageAsString).imageUrl}}" alt="avatar">
                              </a>
                              <div class="chat-about">
                                <h6 class="m-b-0">{{selectedUser.username}}</h6>
                                <small>{{selectedUser.status}}</small>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="chat-history " style="height: 65vh; width: 100%; overflow-y: scroll; ">
                          <ul class="mb-0">
                            @for(chat of chats; track chat){
                            @if(selectedUserId != chat.userId){
                            <li class="clearfix d-flex"
                              style="flex-direction: column; width: 100%; align-items:flex-end;">
                              <div class="message-data">
                                <span class="badge text-bg-secondary">{{formatChatDate(chat.date)}}</span>
                              </div>
                              <div class="message-box my-message">
                                <p>{{chat.message}}<br><span>{{formatChatHourPopup(chat.date)}}</span></p>
                              </div>
                            </li>
                            }@else {
                            <li class="clearfix">
                              <div class="message-data">
                                <span class="badge text-bg-secondary">{{formatChatDate(chat.date)}}</span>
                              </div>
                              <div class="message-box friend-message">
                                <p>{{chat.message}}<br>
                                  <span>{{formatChatHourPopup(chat.date)}}</span>
                                  <!--<span class="tick"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="15"
                                  id="msg-dblcheck-ack" x="2063" y="2076">
                                  <path
                                    d="M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.88a.32.32 0 0 1-.484.032l-.358-.325a.32.32 0 0 0-.484.032l-.378.48a.418.418 0 0 0 .036.54l1.32 1.267a.32.32 0 0 0 .484-.034l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.88a.32.32 0 0 1-.484.032L1.892 7.77a.366.366 0 0 0-.516.005l-.423.433a.364.364 0 0 0 .006.514l3.255 3.185a.32.32 0 0 0 .484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"
                                    fill="#4fc3f7" />
                                </svg></span>-->
                                </p>
                              </div>
                            </li>
                            }
                            }
                          </ul>
                        </div>
                        <!-- El de origen
                    <div class="chat-message clearfix d-block">
                      <div class="input-group mb-0">
                        <div (click)="sendMessage()"  class="input-group-prepend">
                          <span class="input-group-text" >
                            <i class="fa fa-send"></i>
                          </span>
                        </div>
                        <input [(ngModel)]="message" type="text" class="form-control" placeholder="Enter text here..."
                          style="height: 30px;">
                      </div>
                    </div>-->


                        <div id="input-section">
                          <input type="text" pInputText [(ngModel)]="message" />
                          <button class="send" (click)="sendMessage()" [disabled]="!message">
                            <div class="circle "><ion-icon name="send"></ion-icon></div>
                          </button>
                        </div>



                      </div>
                      }@else {}
                    </div>
                  </div>
                </div>
              </div>
              <!--</div>-->
              <div class="row ">

              </div>
            </div>
            <div class="main-content-container container-fluid px-4 tab-pane fade" id="tables">
              <div class="row">
                <div class="col">
                  <div class="card card-small mb-4">
                    <div class="card-header border-bottom">
                      <h6 class="m-0">Activas</h6>
                    </div>
                    <div class="card-body p-0  text-center" *ngFor="let appHome of this.user.domains; let i =index">
                      <div>
                        <div class="card-list ">
                          <img class="image" *ngIf="appHome.images" (click)="showHome(appHome)"
                            style="aspect-ratio:16/9;" [src]="appHome.images[0].imageUrl" alt="First slide" />
                          <div class="content">
                            <div class="texts">
                              <div>{{appHome.tipo}} en {{appHome.calle}} {{appHome.numero}} en {{appHome.condicion}} en
                                {{appHome.ciudad}}
                              </div>
                              <div>
                                <div class="row">
                                  <div class="price float-end" *ngIf="appHome.precioFinal > 0">
                                    <div class="price-container"
                                      *ngIf="appHome.condicion=='Venta' || appHome.condicion=='Alquiler y venta'">
                                      <span *ngIf=" appHome.precioInicial > appHome.precioFinal"
                                        style="font-size: .675em; color: #007aa2;"
                                        class="price-value text-decoration-line-through old-price mr-2">{{formatNumberWithCommas(appHome.precioInicial)+'€'}}</span>
                                      <span *ngIf="appHome.precioFinal"
                                        class="price-value">{{formatNumberWithCommas(appHome.precioFinal)}}€</span>
                                      <div class="diff float-end" *ngIf="appHome.precioInicial > appHome.precioFinal">
                                        <span class="ml-1"
                                          style="color:#7ce800;">-{{this.discount(''+appHome.precioInicial,''+appHome.precioFinal)}}%</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div *ngIf="appHome.precioAlquiler != 0" class="price">
                                    <div class="price-container"
                                      *ngIf="appHome.condicion=='Alquiler' || appHome.condicion=='Alquiler y venta' || appHome.condicion=='Compartir'">
                                      <span *ngIf=" appHome.precioAlquilerInicial > appHome.precioAlquiler"
                                        style="font-size: .675em; color: #007aa2;"
                                        class="price-value text-decoration-line-through old-price mr-2">{{formatNumberWithCommas(appHome.precioAlquilerInicial)+'€'}}</span><span
                                        *ngIf=" appHome.precioAlquiler != 0"
                                        class="price-value">{{formatNumberWithCommas(appHome.precioAlquiler)}}€</span><span
                                        class="suffix">/mes</span>
                                      <div class="diff float-end">
                                        <span *ngIf="appHome.precioAlquilerInicial>appHome.precioAlquiler"
                                          style="color:#7ce800;">-{{this.discount(''+appHome.precioAlquilerInicial,''+appHome.precioAlquiler)}}%</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>


                            </div>
                            <div class="featured-box">
                              <div class="private">
                                <div class="feature float-end">
                                  <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
                                    <!--<button nz-button nz-dropdown [nzDropdownMenu]="menu" nzType="dashed">
                                      Actions
                                      <span nz-icon nzType="down"></span>
                                    </button>
                                    <nz-dropdown-menu #menu="nzDropdownMenu">
                                      <ul nz-menu>
                                        <li nz-menu-item>
                                          <a>1st item</a>
                                        </li>
                                        <li nz-menu-item>
                                          <a>2nd item</a>
                                        </li>
                                        <li nz-menu-item>
                                          <a>3rd item</a>
                                        </li>
                                      </ul>
                                    </nz-dropdown-menu>-->
                                    <!---->
                                    <div ngbDropdown>
                                      <button type="button" class="btn btn-outline-secondary" id="dropdownConfig"
                                        ngbDropdownToggle>Opciones</button>
                                      <div ngbDropdownMenu aria-labelledby="dropdownConfig">
                                        <button ngbDropdownItem data-bs-toggle="modal" data-bs-target="#statsModal"
                                          (click)="customChartLine(appHome)"><i class="fa fa-line-chart"
                                            aria-hidden="true"></i><span class="ml-2">Estadísticas</span></button>
                                        <button ngbDropdownItem data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                                            class="fa fa-star" aria-hidden="true"></i><span
                                            class="ml-2">Destacar</span></button>
                                        <button ngbDropdownItem (click)="sidenav.toggle();openSidenav(appHome)"><i
                                            class="fa fa-pencil" aria-hidden="true"></i><span
                                            class="ml-2">Editar</span></button>
                                        <button ngbDropdownItem class="text-danger" (click)="deleteHome(appHome)"><i
                                            class="fa fa-trash" aria-hidden="true"></i><span
                                            class="ml-2">Borrar</span></button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <nz-empty *ngIf="!this.user.domains"
                        nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
                        [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
                        <ng-template #contentTpl>
                          <span>
                            Customize
                            <a href="#API">Description</a>
                          </span>
                        </ng-template>
                        <ng-template #footerTpl>
                          <button nz-button nzType="primary">Crear ahora</button>
                        </ng-template>
                      </nz-empty>
                    </div>
                  </div>
                </div>
              </div>
              <!-- update drawer -->

              <!--<p-sidebar [(visible)]="visibleDrawer" [fullScreen]="true">
            <ng-template pTemplate="header">
              <span class="font-semibold text-xl border-bottom w-100 pb-2">
                <button class="btn btn-outline-light text-white" (click)="closeDrawer()">Cancelar</button>
              </span>
            </ng-template>
            <ng-template class="z-0" pTemplate="body">
              <div class="row z-1">
                <div class="col-12">
                  
                  

                  <div class="container" *ngIf="this.home.tipo=='Proyecto nuevo'">
                    <p>Esto va en New project!</p>
                  </div>
                </div>
              </div>
            </ng-template>
          </p-sidebar>-->
            </div>
            <div class="main-content-container container-fluid px-4 tab-pane fade" id="profile">
              <div class="row mt-5">
                <div class="col-lg-4">
                  <div class="card card-small mb-4 pt-3">
                    <div class="profile-container">
                      <div class="img-container" *ngIf="this.tempProfile==null">
                        <img [src]="this.user.profileImage.imageUrl" alt="profile image">
                      </div>
                      <div class="img-container" *ngIf="this.tempProfile!=null">
                        <img [src]="this.croppedImageProfile" alt="profile image">
                      </div>
                      <p class="info full-name">{{this.user.username}}</p>
                      <p class="info role">
                        <i class="fas fa-star"></i>
                        4.9 (33 valoraciones)
                      </p>
                      <p class="info place">
                        <i class="fas fa-map-marker-alt"></i>
                        Martial arts, The tournament
                      </p>

                      <div class="posts-info">
                        <p><span>336</span> Vendidos</p>
                        <p><span>4300</span> Likes</p>
                        <p>
                          <span *ngIf="this.user.domains">{{this.user.domains.length}}</span>
                          <span *ngIf="!this.user.domains">0</span>
                          Publicados
                        </p>
                      </div>

                      <button class="action" pRipple>Llamar</button>
                      <button class="action message" pRipple>Chat</button>
                    </div>
                    <!--<div class="card-header border-bottom text-center">
                  <div class="mb-3 mx-auto" *ngIf="this.imageChangedEventProfile==null">
                    <img class="rounded-circle" [src]="this.user.profileImage.imageUrl"
                      alt="User Avatar" width="110">
                  </div>
                  <div class="mb-3 mx-auto" *ngIf="this.imageChangedEventProfile!=null">
                    <img class="rounded-circle" [src]="this.croppedImageProfile"
                      alt="User Avatar" width="110">
                  </div>
                  <h6 class="mb-0">{{this.user.username}}</h6>
                  <span class="text-muted d-block mb-2">Project Manager</span>
                  <button type="button" class="mb-2 button is-outlined is-rounded is-link mr-2">
                    <i class="material-icons mr-1">person_add</i>Follow</button>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item px-4">
                    
                    <div class="progress-wrapper" style="background-color: #88807b;">
                      <img src="https://i.ibb.co/FhvsMG3/docker-image-png.png" style="aspect-ratio: 16/9;" alt="">
                      
                    </div>
                  </li>
                  <li class="list-group-item p-4">
                    <strong class="text-muted d-block mb-2">Description</strong>
                    <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Odio eaque, quidem, commodi soluta
                      qui quae minima obcaecati quod dolorum sint alias, possimus illum assumenda eligendi
                      cumque?</span>
                  </li>
                </ul>-->

                  </div>
                </div>
                <div class="col-lg-8">
                  <div class="card card-small mb-4">
                    <div class="card-header border-bottom">
                      <h6 class="m-0">Mi perfil</h6>
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item p-3">
                        <div class="row">
                          <div class="col">
                            <form #editUserForm="ngForm" (ngSubmit)="updateUser()" id="editUserForm">
                              <div class="form-group row">
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="feFirstName">Nombre</label>
                                  <input type="text" class="form-control" id="firstname" name="firstname"
                                    [(ngModel)]="this.user.firstname">
                                </div>
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="feLastName">Apellido</label>
                                  <input type="text" class="form-control" id="feLastName" name="lastname"
                                    [(ngModel)]="this.user.lastname">
                                </div>
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="feEmailAddress">Email</label>
                                  <input type="email" class="form-control" id="feEmailAddress" name="email"
                                    [(ngModel)]="this.user.email">
                                </div>
                              </div>
                              <div class="form-group row">
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="feInputPhone">Teléfono</label>
                                  <input type="text" class="form-control" id="feInputPhone" name="phone"
                                    [(ngModel)]="this.user.phone">
                                </div>
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="fePassword">Empresa</label>
                                  <input type="text" class="form-control" id="feCompany" name="company"
                                    [(ngModel)]="this.user.company" [value]="">
                                </div>
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                  <label for="feInputColor">Color corporativo</label>
                                  <nz-color-picker class="form-control" nzTrigger="hover" nzSize="small"
                                    [(ngModel)]="this.user.color" id="brandingcolor"></nz-color-picker>
                                </div>
                              </div>

                              <div class="form-group row">
                                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 d-flex flex-column align-items-center">
                                  <image-cropper class="mt-1" [imageChangedEvent]="imageChangedEventBranding"
                                    [maintainAspectRatio]="false" [aspectRatio]="16 / 9" format="png"
                                    (imageCropped)="imageCropped($event,'branding')"
                                    (imageLoaded)="imageLoaded($event,'branding')" (cropperReady)="cropperReady()"
                                    (loadImageFailed)="loadImageFailed()">
                                  </image-cropper>
                                  <div class="file is-small is-boxed">
                                    <label class="file-label">
                                      <input class="file-input" type="file" name="resume"
                                        (change)="fileChangeEvent($event,'branding')" accept="image/*" />
                                      <span class="file-cta">
                                        <span class="file-icon">
                                          <i class="fas fa-upload"></i>
                                        </span>
                                        <span class="file-label">Imagen corporativa</span>
                                      </span>
                                    </label>
                                  </div>
                                </div>
                                <div
                                  class="form-group col-lg-4 col-md-4 col-sm-4 col-xs-12 d-flex flex-column align-items-center">
                                  <image-cropper class="mt-1" [imageChangedEvent]="imageChangedEventProfile"
                                    [maintainAspectRatio]="true" [aspectRatio]="1 / 1" format="png" roundCropper="true"
                                    (imageCropped)="imageCropped($event,'profile')"
                                    (imageLoaded)="imageLoaded($event,'profile')" (cropperReady)="cropperReady()"
                                    (loadImageFailed)="loadImageFailed()">
                                  </image-cropper>
                                  <div class="file is-small is-boxed">
                                    <label class="file-label">
                                      <input class="file-input" type="file" name="resume"
                                        (change)="fileChangeEvent($event,'profile')" accept="image/*" />
                                      <span class="file-cta">
                                        <span class="file-icon">
                                          <i class="fas fa-upload"></i>
                                        </span>
                                        <span class="file-label">Imagen de perfil</span>
                                      </span>
                                    </label>
                                  </div>
                                </div>
                                <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-12 text-center my-auto">
                                  <button type="submit" [disabled]="!editUserForm.dirty " class="button is-success"
                                    pRipple>
                                    <span *ngIf="showLoading" class="spinner-border text-light" role="status"
                                      style="width: 1.5rem; height: 1.5rem; ">
                                    </span>
                                    <span style=" font-weight: 600;" *ngIf="!showLoading">Actualizar perfil</span>
                                  </button>
                                </div>
                              </div>
                            </form>
                            <ngx-loading [show]="this.showLoading" [config]="{ backdropBorderRadius: '3px',
                          animationType: ngxLoadingAnimationTypes.rectangleBounce, }"
                              [template]="customLoadingTemplate"></ngx-loading>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <!-- End Default Light Table -->
            </div>
            <div class="main-content-container container-fluid px-4 tab-pane fade" id="reviews">
              <!-- Page Header -->
              <div class="page-header row no-gutters py-4">
                <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                  <span class="text-uppercase page-subtitle">Components</span>
                  <h6 class="page-title text-muted">Mis valoraciones</h6>
                </div>
              </div>
              <!-- End Page Header -->
              <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/1.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-dark">Business</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/0.jpg');">Written
                          by Anna Kunis</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Conduct at an replied removal an amongst</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">However venture pursuit he am mr cordial. Forming musical
                        am
                        hearing studied be luckily. But in for determine what would see...</p>
                      <span class="text-muted">28 February 2024</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/2.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-info">Travel</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/1.jpg');">Written
                          by James Jamerson</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Off tears are day blind smile alone had ready</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">Is at purse tried jokes china ready decay an. Small its
                        shy
                        way had woody downs power. To denoting admitted speaking learning my...</p>
                      <span class="text-muted">29 February 2024</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/3.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-primary">Technology</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/2.jpg');">Written
                          by Jimmy Jackson</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Difficult in delivered extensive at direction</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">Is at purse tried jokes china ready decay an. Small its
                        shy
                        way had woody downs power. To denoting admitted speaking learning my...</p>
                      <span class="text-muted">29 February 2024</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/4.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-warning">Technology</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/3.jpg');">Written
                          by John James</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">It so numerous if he may outlived disposal</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">How but sons mrs lady when. Her especially are unpleasant
                        out
                        alteration continuing unreserved ready road market resolution...</p>
                      <span class="text-muted">29 February 2024</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--aside card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/5.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-info">Travel</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/0.jpg');">Written
                          by Anna Ken</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Attention he extremity unwilling on otherwise cars backwards
                          yet</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">Conviction up partiality as delightful is discovered. Yet
                        jennings resolved disposed exertion you off. Left did fond drew fat head poor jet pan flying
                        over...
                      </p>
                      <span class="text-muted">29 February 2024</span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-12 mb-4">
                  <div class="card card-small card-post card-post--aside card-post--1">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/6.jpeg');">
                      <a href="#" class="card-post__category badge badge-pill badge-dark">Business</a>
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/1.jpg');">Written
                          by Jamie James</a>
                      </div>
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Totally words widow one downs few age every seven if miss
                          part
                          by fact</a>
                      </h5>
                      <p class="card-text d-inline-block mb-3">Discovered had get considered projection who favourable.
                        Necessary up knowledge it tolerably. Unwilling departure education to admitted speaking...</p>
                      <span class="text-muted">29 February 2024</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <div class="card card-small card-post mb-4">
                    <div class="card-body">
                      <h5 class="card-title">Had denoting properly jointure which well books beyond</h5>
                      <p class="card-text text-muted"> In said to of poor full be post face snug. Introduced imprudence
                        see
                        say unpleasing devonshire acceptance son. Exeter longer...</p>
                    </div>
                    <div class="card-footer border-top d-flex">
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/1.jpg');">Written
                          by James Khan</a>
                        <div class="d-flex flex-column justify-content-center ml-3">
                          <span class="card-post__author-name">James Khan</span>
                          <small class="text-muted">21 March 2011</small>
                        </div>
                      </div>
                      <div class="my-auto ml-auto">
                        <a class="btn btn-sm btn-white" href="#">
                          <i class="far fa-bookmark mr-1"></i> Bookmark </a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="card card-small card-post mb-4">
                    <div class="card-body">
                      <h5 class="card-title">Husbands ask repeated resolved but laughter debating</h5>
                      <p class="card-text text-muted">It abode words began enjoy years no do ﻿no. Tried spoil as heart
                        visit
                        blush or. Boy possible blessing sensible set but margaret interest. Off tears...</p>
                    </div>
                    <div class="card-footer border-top d-flex">
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/2.jpg');">Written
                          by Anna Kunis</a>
                        <div class="d-flex flex-column justify-content-center ml-3">
                          <span class="card-post__author-name">Chris Jones</span>
                          <small class="text-muted">21 March 2011</small>
                        </div>
                      </div>
                      <div class="my-auto ml-auto">
                        <a class="btn btn-sm btn-white" href="#">
                          <i class="far fa-bookmark mr-1"></i> Bookmark </a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="card card-small card-post mb-4">
                    <div class="card-body">
                      <h5 class="card-title">Instantly gentleman contained belonging exquisite now direction</h5>
                      <p class="card-text text-muted">West room at sent if year. Numerous indulged distance old law you.
                        Total state as merit court green decay he. Steepest merit checking railway...</p>
                    </div>
                    <div class="card-footer border-top d-flex">
                      <div class="card-post__author d-flex">
                        <a href="#" class="card-post__author-avatar card-post__author-avatar--small"
                          style="background-image: url('../../../assets/images/user-pro-dashboard/images/avatars/3.jpg');">Written
                          by Anna Kunis</a>
                        <div class="d-flex flex-column justify-content-center ml-3">
                          <span class="card-post__author-name">Mark Jameson</span>
                          <small class="text-muted">21 March 2011</small>
                        </div>
                      </div>
                      <div class="my-auto ml-auto">
                        <a class="btn btn-sm btn-white" href="#">
                          <i class="far fa-bookmark mr-1"></i> Bookmark </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post h-100">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/7.jpeg');">
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Extremity so attending objection as engrossed</a>
                      </h5>
                      <p class="card-text">Morning prudent removal an letters by. On could my in order never it. Or
                        excited
                        certain sixteen it to parties colonel not seeing...</p>
                    </div>
                    <div class="card-footer text-muted border-top py-3">
                      <span class="d-inline-block">By
                        <a class="text-fiord-blue" href="#">Alene Trenton</a> in
                        <a class="text-fiord-blue" href="#">News</a>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post h-100">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/8.jpeg');">
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Bed sincerity yet therefore forfeited his </a>
                      </h5>
                      <p class="card-text">Pursuit chamber as elderly amongst on. Distant however warrant farther to of.
                        My
                        justice wishing prudent waiting in be...</p>
                    </div>
                    <div class="card-footer text-muted border-top py-3">
                      <span class="d-inline-block">By
                        <a class="text-fiord-blue" href="#">Chris Jamie</a> in
                        <a class="text-fiord-blue" href="#">News</a>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post h-100">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/9.jpeg');">
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">Object remark lively all did feebly excuse our</a>
                      </h5>
                      <p class="card-text">Speaking throwing breeding betrayed children my to. Me marianne no he
                        horrible
                        produced ye. Sufficient unpleasing and...</p>
                    </div>
                    <div class="card-footer text-muted border-top py-3">
                      <span class="d-inline-block">By
                        <a class="text-fiord-blue" href="#">Monica Jordan</a> in
                        <a class="text-fiord-blue" href="#">News</a>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-4">
                  <div class="card card-small card-post h-100">
                    <div class="card-post__image"
                      style="background-image: url('../../../assets/images/user-pro-dashboard/images/content-management/10.jpeg');">
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">
                        <a class="text-fiord-blue" href="#">His followed carriage proposal entrance</a>
                      </h5>
                      <p class="card-text">For county now sister engage had season better had waited. Occasional mrs
                        interested far expression directly as regard...</p>
                    </div>
                    <div class="card-footer text-muted border-top py-3">
                      <span class="d-inline-block">By
                        <a class="text-fiord-blue" href="#">Monica Jordan</a> in
                        <a class="text-fiord-blue" href="#">News</a>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="main-content-container container-fluid px-4 tab-pane fade" id="ads">
              <!-- Page Header -->
              <div class="row">
                <div class="col">
                  <div class="card card-small mb-4">
                    <div class="card-header border-bottom">
                      <h6 class="m-0">Favoritos</h6>
                    </div>
                    <div class="card-body p-0  text-center" *ngFor="let appHome of this.userFavourites; let i =index">
                      <div>
                        <div class="card-list ">
                          <img class="image" *ngIf="appHome.images" (click)="showHome(appHome)"
                            style="aspect-ratio:16/9;" [src]="appHome.images[0].imageUrl" alt="First slide" />
                          <div class="content">
                            <div class="texts">
                              <div>{{appHome.tipo}} en {{appHome.calle}} {{appHome.numero}} en {{appHome.condicion}} en
                                {{appHome.ciudad}}
                              </div>

                              <div>
                                <div class="row">
                                  <div class="price float-end" *ngIf="appHome.precioFinal > 0">
                                    <div class="price-container"
                                      *ngIf="appHome.condicion=='Venta' || appHome.condicion=='Alquiler y venta'">
                                      <span *ngIf=" appHome.precioInicial > appHome.precioFinal"
                                        style="font-size: .675em; color: #007aa2;"
                                        class="price-value text-decoration-line-through old-price mr-2">{{formatNumberWithCommas(appHome.precioInicial)+'€'}}</span>
                                      <span *ngIf="appHome.precioFinal"
                                        class="price-value">{{formatNumberWithCommas(appHome.precioFinal)}}€</span>
                                      <div class="diff float-end" *ngIf="appHome.precioInicial > appHome.precioFinal">
                                        <span class="ml-1"
                                          style="color:#7ce800;">-{{this.discount(''+appHome.precioInicial,''+appHome.precioFinal)}}%</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div *ngIf="appHome.precioAlquiler != 0" class="price">
                                    <div class="price-container"
                                      *ngIf="appHome.condicion=='Alquiler' || appHome.condicion=='Alquiler y venta' || appHome.condicion=='Compartir'">
                                      <span *ngIf=" appHome.precioAlquilerInicial > appHome.precioAlquiler"
                                        style="font-size: .675em; color: #007aa2;"
                                        class="price-value text-decoration-line-through old-price mr-2">{{formatNumberWithCommas(appHome.precioAlquilerInicial)+'€'}}</span><span
                                        *ngIf=" appHome.precioAlquiler != 0"
                                        class="price-value">{{formatNumberWithCommas(appHome.precioAlquiler)}}€</span><span
                                        class="suffix">/mes</span>
                                      <div class="diff float-end">
                                        <span *ngIf="appHome.precioAlquilerInicial>appHome.precioAlquiler"
                                          style="color:#7ce800;">-{{this.discount(''+appHome.precioAlquilerInicial,''+appHome.precioAlquiler)}}%</span>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="featured-box">
                              <div class="private">
                                <div class="feature float-end my-auto">
                                  <input [checked]="false" (change)="cuoreLike(appHome)" class="red-heart-checkbox"
                                    #redheartcheckbox id="{{appHome.viviendaId}}" type="checkbox">
                                  <label for="{{appHome.viviendaId}}"></label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <nz-empty *ngIf="!this.user.domains"
                        nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
                        [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
                        <ng-template #contentTpl>
                          <span>
                            Customize
                            <a href="#API">Description</a>
                          </span>
                        </ng-template>
                        <ng-template #footerTpl>
                          <button nz-button nzType="primary">Crear ahora</button>
                        </ng-template>
                      </nz-empty>
                    </div>
                  </div>
                </div>
              </div>
              <!--viviendas
          
          aquí va el componente que contiene las tarjetas de home - despues de la migración
          
          -->

            </div>
          </div>

          <!--y<footer class="main-footer d-flex p-2 px-3 bg-white border-top">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="">Blog</a>
          </li>
        </ul>
        <span class="copyright ml-auto my-auto mr-2">Love 2024
          <a rel="nofollow">Isma SL</a>
        </span>
      </footer>-->
        </main>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Ghost buttons -->
<button id="restoreMap" class="restoreMap" style="display: none;" (click)="restoreMapEdit()"></button>
<button id="oculto" class="oculto" style="display: none;" (click)="saveService('user-pro')"></button>
<a id="linkPopup" class="linkPopup" style="display: none;" [routerLink]="['/add',this.routerLinkId]"
  fragment={{this.routerLinkModel}} target="_blank"></a>
<!-- La herencia dispara los eventos del mapa y el clickButton aquí devuelve null -->
<button id="leafletEvent" class="leafletEvent d-none"></button>