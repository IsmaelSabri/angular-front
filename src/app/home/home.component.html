<!--Main navbar-->
<header class="header">
  <div class="logo">
    <img src="assets/img/tmp/unknown-house.png" alt="Logo de la marca">
  </div>
  <nav class="navbar navbar-light">
    <ul class="nav-links">
      <li class="nav-item pr-3">
        <a [routerLink]="" class="nav-link" *ngIf='this.state' (click)="createLocationMarker()"><span nz-icon
            nzType="form" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Publicar</a>
      </li>
      <li class="nav-item pr-3 dropdown">
        <a class="nav-link" nz-dropdown [nzDropdownMenu]="menu" id="navbarDropdown" role="button"
          data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" *ngIf='this.state'><ion-icon size="small"
            name="file-tray-full-outline" style="position: relative; bottom: -5px;"></ion-icon></a>
        <nz-dropdown-menu #menu="nzDropdownMenu">
          <ul nz-menu nzSelectable>
            <li nz-menu-item><a style="font-weight: bold;">Colecciones</a></li>
            <li nz-menu-item><a [routerLink]=""><span nz-icon nzType="save" nzTheme="outline"
                  style="position: relative; bottom: 3px;"></span> Guardadas</a></li>
            <li nz-menu-item><a [routerLink]=""><span nz-icon nzType="schedule" nzTheme="outline"
                  style="position: relative; bottom: 3px;"></span> Reuniones planificadas</a></li>
            <li nz-menu-item><a [routerLink]=""><span nz-icon nzType="audit" nzTheme="outline"
                  style="position: relative; bottom: 3px;"></span> Vistas</a></li>
            <li nz-menu-item><a [routerLink]=""><span nz-icon nzType="stop" nzTheme="outline"
                  style="position: relative; bottom: 3px;"></span> Ocultas</a></li>
          </ul>
        </nz-dropdown-menu>



      <li class="nav-item pr-3">
        <a class="nav-link" (click)="showModal()" *ngIf='this.state'><span nz-icon nzType="bell" nzTheme="outline"
            style="position: relative; bottom: 3px;"></span> </a>
      </li>
      <nz-modal [(nzVisible)]="isVisible" nzTitle="Notificaciones" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()"
        [nzOkLoading]="isOkLoading" style="font-weight: bold;">
        <p *nzModalContent>Obtén notificaciones acerca de tus búsquedas y tus viviendas guardadas.</p>
      </nz-modal>
      <li class="nav-item pr-3">
        <a routerLink="/login" *ngIf='!this.state' class="nav-link"><span nz-icon nzType="login" nzTheme="outline"
            style="position: relative; bottom: 3px;"></span> Entrar </a>
      </li>
      <li class="nav-item pr-3">
        <a routerLink="/register" *ngIf='!this.state' class="nav-link"> Registrarse </a>
      </li>
      <li class="nav-item pr-3">
        <a class="nav-link" *ngIf='this.state' (click)="onLogOut()" routerLink="/home"><span nz-icon nzType="logout"
            nzTheme="outline" style="position: relative; bottom: 3px;"></span> Salir </a>
      </li>
      <li>
        <a class="btn"><button class="navbar-toggler border-0 ms-auto" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <i class="fa fa-bars" aria-hidden="true"></i>
          </button></a>
      </li>
      <li class="nav-item pr-3">
        <a class="nav-link" *ngIf='this.state' routerLink="/user/management"><span nz-icon nzType="user"
            nzTheme="outline" style="position: relative; bottom: 3px;"></span> {{user?.username}} </a>
      </li>
    </ul>
  </nav>

</header>

<!--collapse navbar-->
<div class="collapse" id="navbarToggleExternalContent">
  <div class="container-fluid">
    <nav style="display: block;">
      <ul class="nav-links nav navbar-nav"
        style="padding-right:2%;list-style:none;padding:0;margin:0;display:inline-block;overflow-x:auto;white-space:nowrap;flex-wrap:inherit;">
        <li class="nav-item active pr-3">
          <a routerLink="/home" class="nav-link"> Comprar </a>
          <!--<li class="nav-item pr-3">
            <a href="#" [hidden]="!isAdmin" class="nav-link disabled" routerLink="/user/management"> Usuarios</a>
          </li>-->
        <li class="nav-item pr-3">
          <a href="#" class="nav-link disabled"> Vender </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link " routerLink="/list"> Vendido </a>
        </li>
        <li class="nav-item pr-3">
          <a routerLink="/vlog" class="nav-link"> Compartir </a>
        </li>


        <li class="nav-item pr-3">
          <a [routerLink]="" class="nav-link"> Buscar agentes
          </a>
        </li>
        <li class="nav-item pr-3">
          <a [routerLink]="" class="nav-link"> Noticias
          </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link" routerLink=""> Comercial </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link" routerLink=""> Vivir en España </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- Map area -->
<div class="container">
  <ul class="nav nav-fill" id="secondnav">
    <li class="nav-item active pr-3">
      <a routerLink="" class="nav-link nav-border"><span nz-icon nzType="search" nzTheme="outline"
          style="position: relative; bottom: 3px;"></span> Map area </a>
    </li>
    <li class="nav-item pr-3">
      <a class="nav-link nav-border" data-toggle="modal" data-target="#addMarkerModal"> Tipo de propiedad </a>
    </li>
    <li class="nav-item pr-3">
      <a routerLink="" class="nav-link nav-border"> Precio </a>
    </li>
    <!--<li class="nav-item pr-3">
          <a href="#" [hidden]="!isAdmin" class="nav-link disabled" routerLink="/user/management"> Usuarios</a>
        </li>-->
    <li class="nav-item pr-3">
      <a href="#" class="nav-link nav-border"> Habitaciones </a>
    </li>
    <li class="nav-item pr-3">
      <a routerLink="/vlog" class="nav-link nav-border"><span nz-icon nzType="sliders" nzTheme="outline"
          style="position: relative; bottom: 3px;"></span> Filtros </a>
    </li>
    <li class="nav-item pr-3">
      <a href="#" class="nav-link nav-border" routerLink="/list"><span nz-icon nzType="bars" nzTheme="outline"
          style="position: relative; bottom: 3px;"></span> Lista </a>
    </li>
  </ul>
</div>


<!-- modal add home  -->
<div *ngIf='this.state' class="modal draggable fade bd-example-modal-lg" id="addMarkerModal" tabindex="-1" rol="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog" rol="document">
    <div class="modal-content">
      <div class="modal-header">
        <mat-toolbar class="title-toolbar">
          <mat-toolbar-row>
            <span class="title-center">Nueva propiedad</span>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </mat-toolbar-row>
        </mat-toolbar>
        <!---->
      </div>
      <div class="modal-body scrollspy-example bg-light p-3 rounded-2" data-bs-spy="scroll" data-bs-smooth-scroll="true" tabindex="0">
        <div>
          <nz-tabset [nzTabBarExtraContent]="" [nzSize]="'large'" nz-row [nzTabBarStyle]=""
            style="color: #3a3b3c; display: block; align-items: center; justify-content: space-between; width: 100%; border-bottom: 1px solid rgb(206, 203, 203);">
            <nz-tab [nzTitle]="'Ubicación '" nz-col nzSpan="8">
              <form #newMarkerForm="ngForm" method="post" (ngSubmit)="createHome2()" id="markerForm" style="margin-top: 15px;">
                <!--introducir provincia-->
                <div class="container-fluid">
                  <button class="btn btn-custom" id="provButton" style=" align-items: center; display: block; width: 100%;"
                    (click)="locationMap()">
                    Provincia
                  </button>
                  <button class="btn btn-custom" id="provButton2" style=" align-items: center; display: none; width: 100%;"
                    (click)="showCityResult()">
                    Ok
                  </button>
                </div>
                <div id="map_2"
                  style="width: 100%; height: 290px; border-radius:5px; margin-top: 7px; display: none;">
                </div>
                <!-- Calle y número -->
                <div class="form-group" style="margin-top: 20px; padding-left: 4px;">
                  <label for="calle">Calle</label>
                  <input style="border:1px solid #bcd1c6;" class="form-control inputValue" id="" type="text" name="calle" required [(ngModel)]="home.calle" placeholder="Calle, avenida, plaza...">
                </div>
                <div class="form-group row" style="margin-top: 38px;">
                  <div class="col" style="padding-left: 21px;">
                    <label for="numero">Número</label>
                    <input style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="" type="text" ngModel pattern="\d*" maxlength="3" (keypress)="numberOnly($event)" name="numero"
                      required [(ngModel)]="home.numero" placeholder="Numero">
                  </div>
                  <div class="col" style="padding-left: 21px;">
                    <label for="cp">Código postal</label>
                  <input style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="" type="text" ngModel pattern="\d*" maxlength="5" (keypress)="numberOnly($event)" name="cp"
                    required [(ngModel)]="home.cp" placeholder="Código postal">
                  </div>
                </div>
                <!-- Superficie y Garage -->
                <div class="form-group row" style="margin-top: 32px;">
                  <div class="col" style="padding-left: 21px;">
                    <label for="superficie">Superficie</label>
                    <input style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="" type="text" ngModel pattern="\d*" maxlength="20" (keypress)="numberOnly($event)" name="superfice"
                      required [(ngModel)]="home.superficie" placeholder="M²">
                  </div>
                  <div class="col" style="padding-left: 21px;">
                    <label for="garage">Aparcamientos</label>
                  <input style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="" type="text" ngModel pattern="\d*" maxlength="5" (keypress)="numberOnly($event)" name="garage"
                    required [(ngModel)]="home.garage" placeholder="Nº" >
                  </div>
                </div>
                <!-- Opción a la que se destina y tipo -->
                <div class="form-group row" style="margin-top: 32px;">
                  <div class="col" style="padding-left: 21px;" >
                    <label for="opcion">Alquiler - Venta ...</label>
                    <mat-form-field floatLabel="never"  appearance="outline" class="search no-label">
                    <!--<mat-label>Opción</mat-label>-->
                    <mat-select #optionInput="ngModel" [(ngModel)]="home.condicion" panelClass="example-panel" required >
                      <mat-option *ngFor="let opt of condicion" [value]="opt">
                        {{opt}}
                      </mat-option>
                    </mat-select>
                    <mat-error style="color:red; font-size: xx-small;" *ngIf="optionInput.touched && optionInput.invalid">Seleccione una opción</mat-error>
                    <mat-hint>{{optionInput.value?.sound}}</mat-hint>                  
                    </mat-form-field>
                   </div>
                <div  class="col" style="padding-left: 21px; ">
                  <label for="Tipo">Tipo de inmueble</label>
                  <mat-form-field [floatLabel]="'never'"  appearance="outline" class="search no-label">
                    <!--<mat-label>Tipo</mat-label>-->
                    <mat-select #typeInput="ngModel" [(ngModel)]="home.tipo" panelClass="example-panel" required >
                      <mat-option *ngFor="let opt of tipo" [value]="opt" >
                        {{opt}}
                      </mat-option>
                    </mat-select>
                    <mat-error style="color:red; font-size: xx-small;" *ngIf="typeInput.touched && typeInput.invalid">Seleccione una opción</mat-error>
                    <mat-hint>{{typeInput.value?.sound}}</mat-hint>                  
                  </mat-form-field>
                 </div>
                </div>
                <!-- Habitaciones y baños -->
                <div class="form-group" style="margin-top: auto;">                  
                  <div class="row">
                    <div class="col" style="padding-left: 21px;">
                      <label for="habitaciones">Habitaciones</label>
                      <input #roomsInput="ngModel" style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="rooms" type="text" ngModel pattern="\d*" maxlength="3" (keypress)="numberOnly($event)" name="habitaciones"
                    required [(ngModel)]="home.habitaciones" placeholder="0-999" >
                    </div>
                    <div class="col" style="padding-left: 21px;">
                      <label for="baños">Baños</label>
                      <input style="border:1px solid #bcd1c6; width: 212px;" class="form-control inputValue" id="" type="text" ngModel pattern="\d*" maxlength="3" (keypress)="numberOnly($event)" name="baños"
                    required [(ngModel)]="home.aseos" placeholder="Aseos">
                      </div>
                  </div>
                </div>
                <!-- Estado en el que se encuentra y a destacar -->
                <div class="form-group row" style="margin-top: 32px;">
                  <div class="col" style="padding-left: 21px;" >
                    <label for="estado">Estado</label>
                    <mat-form-field floatLabel="never"  appearance="outline" class="search no-label">
                    <!--<mat-label>Opción</mat-label>-->
                    <mat-select #stateInput="ngModel" [(ngModel)]="home.estado" panelClass="example-panel" required >
                      <mat-option *ngFor="let opt of propertyState" [value]="opt">
                        {{opt}}
                      </mat-option>
                    </mat-select>
                    <mat-error style="color:red; font-size: xx-small;" *ngIf="stateInput.touched && stateInput.invalid">Seleccione una opción</mat-error>
                    <mat-hint>{{stateInput.value?.sound}}</mat-hint>                  
                    </mat-form-field>
                   </div>
                <div  class="col" style="padding-left: 21px; ">
                  <label for="badge">Destacar</label>
                  <mat-form-field [floatLabel]="'never'"  appearance="outline" class="search no-label">
                    <!--<mat-label>Tipo</mat-label>-->
                    <mat-select #badgeInput="ngModel" [(ngModel)]="home.disponibilidad" panelClass="example-panel" required >
                      <mat-option *ngFor="let opt of badge" [value]="opt">
                        {{opt}}
                      </mat-option>
                    </mat-select>
                    <mat-error style="color:red; font-size: xx-small;" *ngIf="badgeInput.touched && badgeInput.invalid">Seleccione una opción</mat-error>
                    <mat-hint>{{badgeInput.value?.sound}}</mat-hint>                  
                  </mat-form-field>
                 </div>
                </div>

                <!-- 

                <li>
                  <mat-card class="result">
                    <mat-card-content>
                      <h2 class="example-h2">Favorito</h2>
                      <section class="example-section">
                        <mat-checkbox class="example-margin" (change)="changeEvent($event)"
                          (indeterminateChange)="checkBox($event)" class="example-margin" [checked]="IsChecked"
                          [(indeterminate)]="IsIndeterminate" [labelPosition]="LabelAlign" [disabled]="IsDisabled">
                        </mat-checkbox>
                      </section>
                    </mat-card-content>
                  </mat-card>
                </li>-->

                
              </form>
            </nz-tab>
            <nz-tab [nzTitle]="'General'" nz-col nzSpan="8">
              <div class="form-group">
                <label for="fotos">Sube una foto</label><br>
                <input required (change)="saveImage($event)" type="file" />
              </div>
              <!-- previsualización -->
              <div class="form-group" *ngIf="prev">
                <img [src]="prev" alt="" height="75px" width="75" style="border-radius:5px;">
              </div>
              <!--textarea-->
              <div class="form-group">
                <label for="descripcion">Descripción</label>
                <textarea required
                  style="resize:none; border-radius:5px; height:100px; width:465px; background-color:white;color:black;"
                  [(ngModel)]='home.descripcion' rows="30" cols="120">
                 </textarea>
              </div>
            </nz-tab>
            <!---->
            <nz-tab [nzTitle]="'Acabados'" nz-col nzSpan="8">
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal"
                    id="new-marker-close">Cerrar</button>
                  <input type="submit" class="btn btn-primary" value="Crear">
                </div>
            </nz-tab>
          </nz-tabset>





        </div>
      </div>
      <div class="modal-footer">
        <mat-toolbar >
          <mat-toolbar-row>
              <div class="col">
              </div>
              <div class="col">
                <button class="center" style="margin-right: 19px; font-weight: 700; border: none; background: none;" (click)="newMarkerForm.reset()">Borrar campos</button>
              </div>
              <div class="col">
              </div>
          </mat-toolbar-row>
        </mat-toolbar>
      </div>
    </div>
  </div>
</div>

<!-- Leaflet map -->
<div id="map"></div>