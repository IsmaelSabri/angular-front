<!--Main navbar-->
<header class="header">
  <div class="logo">
    <img src="assets/img/tmp/unknown-house.png" alt="Logo de la marca">
  </div>
  <nav class="navbar navbar-light">
    <ul class="nav-links">
      <li class="nav-item pr-3">
        <a [routerLink]="" class="nav-link" *ngIf='this.state' (click)="createLocationMarker()"><span nz-icon nzType="form" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Publicar</a>
      </li>
      <li class="nav-item pr-3">
        <a routerLink="/login" *ngIf='!this.state' class="nav-link"><span nz-icon nzType="login" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Entrar </a>
      </li>
      <li class="nav-item pr-3">
        <a routerLink="/register" *ngIf='!this.state' class="nav-link" > Registrarse </a>
      </li>
      <li class="nav-item pr-3">
        <a class="nav-link" *ngIf='this.state' (click)="onLogOut()" routerLink="/home"><span nz-icon nzType="logout" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Salir </a>
      </li>
      <li>
        <a class="btn"><button class="navbar-toggler border-0 ms-auto" type="button" data-bs-toggle="collapse"
          data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <i class="fa fa-bars" aria-hidden="true"></i>
        </button></a>
      </li>
      <li class="nav-item pr-3">
        <a class="nav-link" *ngIf='this.state' routerLink="/user/management"><span nz-icon nzType="user" nzTheme="outline" style="position: relative; bottom: 3px;"></span> {{user?.username}} </a>
      </li>
    </ul>
  </nav>

</header>

<!--collapse navbar-->
<div class="collapse" id="navbarToggleExternalContent">
  <div class="container-fluid">
    <nav style="display: block;">
      <ul class="nav-links nav navbar-nav" style="padding-right:2%;list-style:none;padding:0;margin:0;display:inline-block;overflow-x:auto;white-space:nowrap;flex-wrap:inherit;">
        <li class="nav-item active pr-3">
          <a routerLink="/home" class="nav-link"> Comprar </a>
          <!--<li class="nav-item pr-3">
            <a href="#" [hidden]="!isAdmin" class="nav-link disabled" routerLink="/user/management"> Usuarios</a>
          </li>-->
        <li class="nav-item pr-3">
          <a href="#" class="nav-link disabled"> Vender </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link " routerLink="/list"> Vendido </a>
        </li>
        <li class="nav-item pr-3">
          <a routerLink="/vlog" class="nav-link"> Compartir </a>
        </li>


        <li class="nav-item pr-3">
          <a [routerLink]="" class="nav-link"> Buscar agentes
          </a>
        </li>
        <li class="nav-item pr-3">
          <a [routerLink]="" class="nav-link"> Noticias
          </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link" routerLink=""> Comercial </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link" routerLink=""> Vivir en España </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <!-- Map area -->
    <div class="container">
      <ul class="nav nav-fill" id="secondnav">
        <li class="nav-item active pr-3">
          <a routerLink="" class="nav-link nav-border"><span nz-icon nzType="search" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Map area </a>
        </li>
        <li class="nav-item pr-3">
          <a routerLink=""  class="nav-link nav-border"> Tipo de propiedad </a>
        </li>
        <li class="nav-item pr-3">
          <a routerLink=""  class="nav-link nav-border"> Precio </a>
        </li>
        <!--<li class="nav-item pr-3">
          <a href="#" [hidden]="!isAdmin" class="nav-link disabled" routerLink="/user/management"> Usuarios</a>
        </li>-->
        <li class="nav-item pr-3">
          <a href="#" class="nav-link nav-border"> Habitaciones </a>
        </li>
        <li class="nav-item pr-3">
          <a routerLink="/vlog" class="nav-link nav-border"><span nz-icon nzType="sliders" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Filtros </a>
        </li>
        <li class="nav-item pr-3">
          <a href="#" class="nav-link nav-border" routerLink="/list"><span nz-icon nzType="bars" nzTheme="outline" style="position: relative; bottom: 3px;"></span> Lista </a>
        </li>
      </ul>
    </div>


<!-- modal add marker  -->
<div *ngIf='this.state' class="modal draggable fade bd-example-modal-lg" id="addMarkerModal" tabindex="-1" rol="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog" rol="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center">Nueva propiedad</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <form method="post" (ngSubmit)="createHome2()" id="markerForm">
            <div class="form-group">
              <label for="fotos">Sube una foto</label><br>
              <input required (change)="saveImage($event)" type="file" />
            </div>
            <!-- previsualización -->
            <div class="form-group" *ngIf="prev">
              <img [src]="prev" alt="" height="75px" width="75" style="border-radius:5px;">
            </div>
            <!--textarea-->
            <div class="form-group">
              <label for="descripcion">Descripción</label>
              <textarea required
                style="resize:none; border-radius:5px; height:100px; width:465px; background-color:white;color:black;"
                [(ngModel)]='home.descripcion' rows="30" cols="120">
                  </textarea>
            </div>
            <div class="form-group">
              <label for="calle">Calle</label>
              <input type="text" name="calle" required [(ngModel)]="home.calle" placeholder="calle"
                class="form-control">
            </div>
            <div class="form-group">
              <label for="numero">Número</label>
              <input type="text" ngModel pattern="\d*" maxlength="3" (keypress)="numberOnly($event)" name="numero"
                required [(ngModel)]="home.numero" placeholder="Numero" class="form-control">
            </div>
            <div class="form-group">
              <label for="cp">Código postal</label>
              <input type="text" ngModel pattern="\d*" maxlength="5" (keypress)="numberOnly($event)" name="cp" required
                [(ngModel)]="home.cp" placeholder="Código postal" class="form-control">
            </div>

            <!-- <div class="form-group">
                  <label for="username">Nombre de Usuario</label>
                  <input type="text" name="username" required ngModel class="form-control">
                </div>
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="email" name="email" required ngModel class="form-control">
                </div> 
                <div *ngIf="isAdmin" class="form-group">
                  <label for="authority">Rol</label>
                  <select name="rol" required ngModel="ROLE_USER" class="form-control">
                    <option value="ROLE_USER">USER</option>
                    <option value="ROLE_HR">HR</option>
                    <option value="ROLE_MANAGER">MANAGER</option>
                    <option value="ROLE_ADMIN">ADMIN</option>
                    <option value="ROLE_SUPER_ADMIN">SUPER ADMIN</option>
                  </select>
                </div>
                <div *ngIf="!isAdmin" class="form-group">
                  <label for="authority">Rol</label>
                  <input type="text" name="rol" required ngModel="USER" readonly class="form-control">
                </div>
                <div class="input-group mb-2">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Foto de Perfil </span>
                  </div>
                  <div class="custom-file">
                    <input type="file" accept="image/*" name="profileImage"
                    (change)="onProfileImageChange($event.target.files[0].name, $event.target.files[0])"
                      class="custom-file-input">
                    <label class="custom-file-label"><span [hidden]="!fileName">{{ fileName }}</span>
                      <span [hidden]="fileName">Seleccionar de mi equipo</span>
                    </label>
                  </div>
                </div>
                <fieldset class="form-group">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="checkbox" name="active" ngModel class="form-check-input" >
                      Activo
                    </label>
                  </div>
                  <div class="form-check disabled">
                    <label class="form-check-label">
                      <input type="checkbox" name="notLocked" ngModel class="form-check-input">
                      Desbloqueado
                    </label>
                  </div>
                </fieldset>-->

            <li>
              <mat-card class="result">
                <mat-card-content>
                  <h2 class="example-h2">Favorito</h2>
                  <section class="example-section">
                    <mat-checkbox class="example-margin" (change)="changeEvent($event)"
                      (indeterminateChange)="checkBox($event)" class="example-margin" [checked]="IsChecked"
                      [(indeterminate)]="IsIndeterminate" [labelPosition]="LabelAlign" [disabled]="IsDisabled">
                    </mat-checkbox>
                  </section>
                </mat-card-content>
              </mat-card>
            </li>

            <button type="submit" style="display: none;" id="new-user-save"></button>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal" id="new-marker-close">Cerrar</button>
              <input type="submit" class="btn btn-primary" value="Crear">
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Leaflet map -->
<div id="map"></div>